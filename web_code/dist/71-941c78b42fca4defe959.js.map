{"version":3,"sources":["webpack:///./src/pages/application/app-design/components/PagePanel/components/PageModify.vue?a5ff","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageModify.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/GroupModify.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageTree.vue?c2b9","webpack:///./src/pages/application/app-design/components/PagePanel/index.vue?5ad2","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageTree.vue?70bd","webpack:///./src/pages/application/app-design/components/PagePanel/components/GroupModify.vue?f936","webpack:///src/pages/application/app-design/components/PagePanel/components/PageTree.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/GroupModify.vue?c8f6","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageModify.vue?d304","webpack:///src/pages/application/app-design/components/PagePanel/index.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageTree.vue?4355","webpack:///./src/pages/application/app-design/components/PagePanel/index.vue","webpack:///./src/pages/application/app-design/components/PagePanel/index.vue?8bd7","webpack:///src/pages/application/app-design/components/PagePanel/components/GroupModify.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageModify.vue?edaa","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageModify.vue?8816","webpack:///src/pages/application/app-design/components/PagePanel/components/PageModify.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageTree.vue?3c60","webpack:///./src/pages/application/app-design/components/PagePanel/components/GroupModify.vue?1946","webpack:///./src/pages/application/app-design/components/PagePanel/components/PageTree.vue","webpack:///./src/pages/application/app-design/components/PagePanel/components/GroupModify.vue?e776","webpack:///./src/pages/application/app-design/components/PagePanel/index.vue?b972","webpack:///./src/pages/application/app-design/components/PagePanel/index.vue?2057"],"names":["content","__esModule","default","module","i","locals","exports","add","component","render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","data","allowDrop","on","saveAllTreeDatas","scopedSlots","_u","key","fn","class","isSelected","isHide","$event","stopPropagation","handleClick","$getImgPrefix","iconMap","elementType","_v","elementName","_s","v","handleCommand","slot","directives","name","rawName","value","children","length","expression","hidden","staticRenderFns","id","visible","handleResetForm","form","rules","nativeOn","preventDefault","model","callback","$$v","$set","loading","handleSubmit","close","_e","handleModeChange","createMode","handleAppChange","selectedAppId","_l","app","handleVersionChange","selectedAppVersionId","item","version","handlePageChange","selectedPageId","page","pageDesignId","groupOptions","onChange","pageSearch","handleSelect","keyword","handleAddPage","handleAddFloder","pageTree","selectedPage","elementId","getPageTree","$emit","handleTreeItemEdit","handleRemoveCache","groupId","groupModifyData","pageId","pageModifyData"],"mappings":"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","file":"71-941c78b42fca4defe959.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageModify.vue?vue&type=style&index=0&id=3e177db0&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"06bf1109\", content, true, {});","import { render, staticRenderFns } from \"./PageModify.vue?vue&type=template&id=3e177db0&scoped=true&\"\nimport script from \"./PageModify.vue?vue&type=script&lang=js&\"\nexport * from \"./PageModify.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageModify.vue?vue&type=style&index=0&id=3e177db0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e177db0\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./GroupModify.vue?vue&type=template&id=0c62b0aa&scoped=true&\"\nimport script from \"./GroupModify.vue?vue&type=script&lang=js&\"\nexport * from \"./GroupModify.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GroupModify.vue?vue&type=style&index=0&id=0c62b0aa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c62b0aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('n-tree',{ref:\"nodeTree\",staticClass:\"node-tree\",attrs:{\"data\":_vm.data,\"node-key\":\"elementId\",\"expand-on-click-node\":false,\"default-expand-all\":\"\",\"highlight-current\":\"\",\"draggable\":true,\"allow-drop\":_vm.allowDrop,\"icon-class\":\"icon-right\"},on:{\"node-drag-end\":_vm.saveAllTreeDatas},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _c('div',{staticClass:\"tree-node\",class:{\n      'is-selected': _vm.isSelected(data),\n      'is-hide': _vm.isHide(data),\n    },on:{\"click\":function($event){$event.stopPropagation();return _vm.handleClick(data)}}},[_c('div',{staticClass:\"node-name\"},[_c('img',{staticClass:\"node-icon\",attrs:{\"src\":_vm.$getImgPrefix(_vm.iconMap[data.elementType]),\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{attrs:{\"title\":data.elementName}},[_vm._v(_vm._s(data.elementName))])]),_vm._v(\" \"),_c('el-dropdown',{staticClass:\"node-right-menu-icon\",on:{\"command\":function (v) { return _vm.handleCommand(v, data); }}},[_c('span',{staticClass:\"el-dropdown-link\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('i',{staticClass:\"el-icon-more el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"edit\"}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-dropdown-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(data.children.length === 0),expression:\"data.children.length === 0\"}],attrs:{\"command\":\"delete\"}},[_vm._v(\"\\n          删除\\n        \")]),_vm._v(\" \"),_c('el-dropdown-item',{attrs:{\"command\":\"hidden\"}},[_vm._v(\"\\n          \"+_vm._s(data.hidden ? '显示' : '隐藏')+\"\\n        \")])],1)],1)],1)}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=09e3c1cb&lang=less&scoped=true&\"","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTree.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModify.vue?vue&type=style&index=0&id=0c62b0aa&lang=less&scoped=true&\"","<template>\n  <n-tree\n    ref=\"nodeTree\"\n    class=\"node-tree\"\n    :data=\"data\"\n    node-key=\"elementId\"\n    :expand-on-click-node=\"false\"\n    default-expand-all\n    highlight-current\n    :draggable=\"true\"\n    @node-drag-end=\"saveAllTreeDatas\"\n    :allow-drop=\"allowDrop\"\n    icon-class=\"icon-right\"\n  >\n    <div\n      class=\"tree-node\"\n      :class=\"{\n        'is-selected': isSelected(data),\n        'is-hide': isHide(data),\n      }\"\n      slot-scope=\"{ data }\"\n      @click.stop=\"handleClick(data)\"\n    >\n      <div class=\"node-name\">\n        <img class=\"node-icon\" :src=\"$getImgPrefix(iconMap[data.elementType])\" alt=\"\">\n        <span :title=\"data.elementName\">{{ data.elementName }}</span>\n      </div>\n      <el-dropdown\n        class=\"node-right-menu-icon\"\n        @command=\"(v) => handleCommand(v, data)\"\n      >\n        <span class=\"el-dropdown-link\" @click.stop>\n          <i class=\"el-icon-more el-icon--right\"></i>\n        </span>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item command=\"edit\">编辑</el-dropdown-item>\n          <el-dropdown-item\n            command=\"delete\"\n            v-show=\"data.children.length === 0\"\n          >\n            删除\n          </el-dropdown-item>\n          <el-dropdown-item command=\"hidden\">\n            {{ data.hidden ? '显示' : '隐藏' }}\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n    </div>\n  </n-tree>\n</template>\n\n<script>\n  //url\n  import API from '@/api/application.js'\n\n  import _ from 'lodash'\n  import { UPDATE_PAGE_CONFIG, CONFIRM_SAVE_CONFIG } from '@/config/storeKey'\n  import { iconMap } from '@/config/widgets'\n  import { pageInject } from '@/renderer/tools/pageStore'\n  import EventBus from '@/renderer/tools/eventBus'\n  import { SWITCH_PAGE } from '@/config/eventKey'\n  export default {\n    name: 'TreePanel',\n    inject: [...pageInject],\n    components: {\n    },\n    props: {\n      data: {\n        type: Array,\n        required: true,\n      },\n      defaultSelect: {\n        type: String,\n      },\n    },\n    data() {\n      return {\n        iconMap,\n        selectedId: '',\n      }\n    },\n    watch: {\n      defaultSelect: {\n        handler(n, o) {\n          if (n) {\n            this.$nextTick(() => {\n              this.selectedId = n\n              this.$refs.nodeTree.setCurrentKey(n)\n            })\n          }\n        },\n        immediate: true,\n      },\n      data() {\n        this.$nextTick(() => {\n          this.$refs.nodeTree.setCurrentKey(this.selectedId)\n        })\n      }\n    },\n    methods: {\n      handleCommand(command, data) {\n        switch (command) {\n          case 'edit':\n            this.toggleEdit(data)\n            break\n          case 'delete':\n            this.toggleDelete(data)\n            break\n          case 'hidden':\n            this.toggleHidden(data)\n            break\n        }\n      },\n      async handleClick(node) {\n        if (node.elementId === this.selectedId) {\n          return\n        }\n        if (node.elementType !== 'page') {\n          return\n        }\n        await this._storeDispatch(CONFIRM_SAVE_CONFIG)\n        this.getPageConfig(node)\n      },\n      // 获取数据并给数据加上sort，传给后端\n      saveAllTreeDatas() {\n        const tempNodeData = _.cloneDeep(this.$refs.nodeTree.data)\n        const data = this.treeMap(tempNodeData, 0)\n        this.$http({\n          url: API.appPageDesignBatchUpdateTree,\n          data,\n        }).then((res) => {\n          this.$emit('handleTreeChange')\n        })\n      },\n      treeMap(data, parentId) {\n        return data.reduce((prev, cur, index) => {\n          let tempItem = {\n            id: cur.pageDesignId,\n            name: cur.elementName,\n            sort: index,\n            hidden: cur.hidden,\n            appDesignId: this.$route.query.vid,\n            type: cur.elementType === 'page-group' ? 2 : 1,\n            parentId,\n          }\n          if (cur.code) {\n            tempItem.code = cur.code\n          }\n          if (cur.children && cur.children.length !== 0) {\n            return prev.concat({\n              ...tempItem,\n              pages: this.treeMap(cur.children, cur.pageDesignId),\n            })\n          } else {\n            return prev.concat({\n              ...tempItem,\n              pages: [],\n            })\n          }\n        }, [])\n      },\n      allowDrop(draggingNode, dropNode, type) {\n        if (\n          dropNode.data.elementType === 'page' ||\n          (draggingNode.data.elementType === 'page-group' &&\n            dropNode.data.elementType === 'page-group')\n        ) {\n          return type !== 'inner'\n        } else {\n          return true\n        }\n      },\n      isSelected(node) {\n        return this.selectedId === node.elementId\n      },\n      isHide(node) {\n        return node.hidden\n      },\n      toggleHidden(node) {\n        this.$http({\n          url:\n            node.elementType == 'page-group'\n              ? API.appPageDesignUpdateGroup\n              : API.appPageDesignUpdatePage,\n          data: {\n            id: node.pageDesignId,\n            hidden: !node.hidden,\n            appDesignId: this.$route.query.vid,\n          },\n        }).then((res) => {\n          if (res.msgCode == 200) {\n            node.hidden = !node.hidden\n            node.children.forEach((c) => (c.hidden = node.hidden))\n          }\n        })\n      },\n      async toggleDelete(data) {\n        await this._storeDispatch(CONFIRM_SAVE_CONFIG)\n        this.$confirm(\n          `确定删除该${data.elementType == 'page-group' ? '分组' : '页面'}吗？`,\n          '提示',\n          {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning',\n            closeOnClickModal: false,\n          }\n        ).then(() => {\n          this.$http({\n            url:\n              data.elementType == 'page-group'\n                ? API.appPageDesignRemoveGroup\n                : API.appPageDesignRemovePage,\n            data: { id: data.pageDesignId },\n          }).then((res) => {\n            if (\n              data.elementId === this.selectedId ||\n              data.children.map((c) => c.elementId).includes(this.selectedId)\n            ) {\n              const pages = this.data.reduce((total,item) => {\n                const { children, ...others } = item\n                item.elementType ===  'page' && total.push(others)\n                if(children && children.length) {\n                  total = total.concat(children.filter(child => child.elementType ===  'page'))\n                }\n                return total\n              }, [])\n              // 删除后帮选中第一个\n              if(pages.length) {\n                this.$emit('select', pages[0])\n              } else {\n                this.selectedId = undefined\n                this.$emit('select', null)\n              }\n              this.$emit('removeCache')\n            }\n            this.$emit('handleTreeChange')\n          })\n        })\n      },\n      async toggleEdit(data) {\n        await this._storeDispatch(CONFIRM_SAVE_CONFIG)\n        this.$emit('handleTreeItemEdit', _.cloneDeep(data))\n      },\n      async getPageConfig(page) {\n        const loading = this.$loading({\n          lock: true,\n          text: '正在请求最新配置',\n        })\n        this.$emit('loading', true)\n        setTimeout(async () => {\n          this._storeDispatch(UPDATE_PAGE_CONFIG, { elementId: page.elementId, pageDesignId: page.pageDesignId, appDesignId: this.$route.query.vid })\n            .then(() => {\n              this.selectedId = page.elementId\n              this.$emit('select', page, true)\n            })\n            .finally(() => {\n              loading.close()\n            })\n        }, 100)\n      },\n    },\n    created () {\n      EventBus.$on(SWITCH_PAGE, (node) => {\n        this.handleClick(node)\n      })\n    },\n    destroyed () {\n      EventBus.$off(SWITCH_PAGE)\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '~@/styles/index.less';\n\n  .node-tree::v-deep {\n    .el-tree-node .el-tree-node__content {\n      background-color: transparent;\n      &:hover {\n        background-color: #F5F7FA;\n      }\n    }\n    &.el-tree--highlight-current {\n      .el-tree-node.is-current > .el-tree-node__content {\n        background-color: #f0f6ff;\n      }\n    }\n\n    .el-tree-node__content {\n      height: auto;\n      & > .el-tree-node__expand-icon {\n        padding: 2px;\n        color: #999999;\n      }\n    }\n\n    .tree-node {\n      position: relative;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      width: 100%;\n      padding-right: 15px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        color: @drop-main-color;\n\n        .node-hide {\n          display: block;\n        }\n      }\n\n      .node-name {\n        padding: 1px;\n        font-size: 12px;\n        color: #333333;\n        font-family: PingFangSC-Regular;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      .node-icon {\n        margin-right: 2px;\n        margin-top: -4px;\n        width: 16px;\n        height: 16px;\n      }\n\n      .node-hide {\n        display: none;\n      }\n\n      &.is-selected {\n        .node-name {\n          color: @drop-main-color;\n        }\n      }\n\n      &.is-hide {\n        opacity: 0.5;\n      }\n\n      .node-right-menu-icon {\n        position: absolute;\n        right: 10px;\n        top: 0;\n        cursor: pointer;\n        color: #999999;\n      }\n      // .node-right-menu {\n      //     display: flex;\n      //     .item {\n      //         margin-left: 10px;\n      //     }\n      // }\n    }\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{directives:[{name:\"element-screen\",rawName:\"v-element-screen\"}],staticClass:\"group-modify\",attrs:{\"custom-class\":\"low-code-dialog\",\"close-on-click-modal\":false,\"title\":_vm.id ? '修改分组' : '新增分组',\"visible\":_vm.visible,\"width\":\"800px\",\"top\":\"5vh\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.handleResetForm}},[_c('n-form',{ref:\"dataGroupForm\",staticClass:\"group-modify-form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('n-form-item',{attrs:{\"label\":\"分组名称\",\"prop\":\"name\"}},[_c('el-input',{staticClass:\"form-input\",attrs:{\"placeholder\":\"请输入分组名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sort\"}},[_c('el-input-number',{model:{value:(_vm.form.sort),callback:function ($$v) {_vm.$set(_vm.form, \"sort\", $$v)},expression:\"form.sort\"}})],1),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"是否隐藏\",\"prop\":\"hidden\"}},[_c('el-switch',{attrs:{\"on-text\":\"隐藏\",\"off-text\":\"显示\"},model:{value:(_vm.form.hidden),callback:function ($$v) {_vm.$set(_vm.form, \"hidden\", $$v)},expression:\"form.hidden\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确 认\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.close}},[_vm._v(\"取 消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageModify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageModify.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"page-panel\">\n    <div class=\"page-search-bar\">\n      <el-autocomplete\n        size='mini'\n        class=\"autocomplete\"\n        popper-class=\"my-autocomplete\"\n        v-model=\"keyword\"\n        :fetch-suggestions=\"pageSearch\"\n        placeholder=\"请输入页面名称\"\n        @select=\"handleSelect\"\n      >\n        <i class=\"el-icon-search el-input__icon\" slot=\"suffix\"></i>\n        <template slot-scope=\"{ item }\">\n          <div class=\"name\">{{ item.elementName }}</div>\n        </template>\n      </el-autocomplete>\n      <div class=\"btn-group\">\n        <img class=\"btn\" :src=\"$getImgPrefix('/design/svg/eidt-add-page.svg')\"  @click=\"handleAddPage(0)\">\n        <img class=\"btn group\" :src=\"$getImgPrefix('/design/svg/eidt-add-group.svg')\"  @click=\"handleAddFloder(0)\">\n      </div>\n    </div>\n    <div class=\"page-tree\">\n      <page-tree\n        :data=\"pageTree\"\n        :defaultSelect=\"selectedPage.elementId\"\n        @handleTreeChange=\"getPageTree\"\n        @select=\"handleSelect\"\n        @loading=\"$emit('page-load', false)\"\n        @handleTreeItemEdit=\"handleTreeItemEdit\"\n        @removeCache='handleRemoveCache'\n      ></page-tree>\n    </div>\n    <group-modify\n      :id=\"groupId\"\n      :data=\"groupModifyData\"\n      ref=\"groupModify\"\n      @success=\"getPageTree\"\n    />\n    <page-modify\n      :id=\"pageId\"\n      :data=\"pageModifyData\"\n      ref=\"pageModify\"\n      @success=\"getPageTree\"\n    />\n  </div>\n</template>\n\n<script>\n  //url\n  import API from '@/api/application.js'\n\n  import PageTree from './components/PageTree'\n  import GroupModify from './components/GroupModify.vue'\n  import PageModify from './components/PageModify.vue'\n\n  import { store } from '@project/frame'\n\n  import { treeUtil } from '@/utils/tree-utils'\n  import _ from 'lodash'\n  import { CONFIRM_SAVE_CONFIG } from '@/config/storeKey'\n  import {\n    UPDATE_PAGE_CONFIG,\n    UPDATE_PAGE_DATA,\n    RESET_STORE,\n  } from '@/config/storeKey'\n  import KEY from '@/store/base-info/mutation-types'\n  import { pageInject } from '@/renderer/tools/pageStore'\n  function createFilter(queryString) {\n    return (page) => {\n      return (\n        page.elementName.toLowerCase().indexOf(queryString.toLowerCase()) !== -1\n      )\n    }\n  }\n\n  export default {\n    name: 'PagePanel',\n    components: {\n      PageTree,\n      GroupModify,\n      PageModify,\n    },\n    inject: ['dndOptions', ...pageInject],\n    data() {\n      return {\n        appId: this.$route.query.id,\n        vid: this.$route.query.vid,\n        groupId: 0,\n        pageId: 0,\n        loading: false,\n        selectedPage: {\n          elementId: undefined,\n          elementName: undefined,\n        },\n        pageTree: [],\n        groupModifyData: {},\n        pageModifyData: {},\n        keyword: ''\n      }\n    },\n    methods: {\n      // 设置/获取 之前选中页面的缓存\n      handlePageCache(cache) {\n        const { appId, vid } = this\n        const key = 'STORE_PAGE_KEY'\n        try {\n          const data = JSON.parse(localStorage.getItem(key) || '{}')\n          if(cache) {\n            data[`${appId}_${vid}`] = cache\n            localStorage.setItem(key, JSON.stringify(data))\n          } else {\n            return data[`${appId}_${vid}`]\n          }\n        } catch(err) {\n          console.error('an error occured when get storage :' + err)\n          return false\n        }\n      },\n      // 清除页面缓存\n      handleRemoveCache() {\n        const { appId, vid } = this\n        const key = 'STORE_PAGE_KEY'\n        const data = JSON.parse(localStorage.getItem(key) || {})\n        data[`${appId}_${vid}`] = ''\n        localStorage.setItem(key, JSON.stringify(data))\n      },\n      pageSearch(queryString, cb) {\n        const results = queryString\n          ? treeUtil.filter(this.pageTree, createFilter(queryString))\n          : this.pageTree\n        cb(treeUtil.toList(results).filter(item => item.elementType === 'page'))\n      },\n      handleSelect(page, isLoaded) {\n        if (!page) {\n          this.selectedPage = {\n            elementId: undefined,\n            elementName: undefined,\n          }\n          this.dndOptions.selectedId = undefined\n          this._storeCommit(RESET_STORE)\n          return\n        }\n        this.handlePageCache(page)\n        if (isLoaded) {\n          this.selectedPage = _.cloneDeep(page)\n          this.dndOptions.selectedId = page.elementId\n          this.$nextTick(() => {\n            this.$emit('page-load', true)\n          })\n        } else {\n          this.getPageConfig(page)\n        }\n      },\n      getPageConfig(page) {\n        const loading = this.$loading({\n          lock: true,\n          text: '正在请求最新配置',\n        })\n        this.$emit('page-load', false)\n        setTimeout(() => {\n          this._storeDispatch(UPDATE_PAGE_CONFIG, { elementId: page.elementId, pageDesignId: page.pageDesignId, appDesignId: this.vid })\n            .then(() => {\n              this.selectedPage = _.cloneDeep(page)\n              this.dndOptions.selectedId = page.elementId\n              this.$emit('page-load', true)\n            })\n            .finally(() => {\n              loading.close()\n            })\n        }, 100)\n      },\n      getPageTree({ pageAdd, response, selectDefault = false } = {}) {\n        this.loading = true\n        this.$http({\n          url: API.appPageDesignTree,\n          data: { appDesignId: this.vid },\n        })\n          .then((res) => {\n            this.pageTree = res.data.map((item) => this.treeMap(item, 0))\n            this.$store.commit(UPDATE_PAGE_DATA, {\n              pageData: _.cloneDeep(treeUtil.toList(this.pageTree)),\n            })\n\n            // 当时新增了一个页面时,切换到那个页面去\n            if(pageAdd) {\n              let target\n              treeUtil.forEach(this.pageTree, item => {\n                if(Number(item.pageDesignId) === response) {\n                  target = item\n                }\n              })\n              this.handleSelect(target)\n              return\n            }\n            if(selectDefault) {\n              // 设置初始选中的页面\n              this.$nextTick(() => {\n                const cachePage = this.handlePageCache()\n                if(cachePage) {\n                  this.handleSelect(cachePage)\n                } else {\n                  let defaultPage = false\n                  treeUtil.forEach(this.pageTree, item => {\n                    if((item.type === 1 || item.type === undefined) && !defaultPage) {\n                      defaultPage = item\n                    }\n                  })\n                  this.handleSelect(defaultPage)\n                }\n              })\n            }\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      // 格式化接口返回的数据\n      treeMap(data, parentId) {\n        const hasChild = data.pages && data.pages.length > 0\n        // 可以根据实际开发需要返回自己想要的key值\n        return {\n          elementId: `${data.code}`,\n          pageDesignId: `${data.id}`,\n          elementType: data.type === 2 ? 'page-group' : 'page',\n          hidden: data.hidden,\n          sort: data.sort,\n          elementName: data.name,\n          parentId: parentId,\n          code: data.code ? data.code : '',\n          children: hasChild\n            ? data.pages.map((i) => this.treeMap(i, data.id))\n            : [],\n          type: data.type\n        }\n      },\n      // 添加分组\n      async handleAddFloder(id) {\n        if(!id) {\n          await this._storeDispatch(CONFIRM_SAVE_CONFIG)\n        }\n        await this.$store.dispatch(KEY.VERSION_JUDGE)\n\n        this.groupId = id\n        this.$nextTick(() => {\n          this.$refs.groupModify.show()\n        })\n      },\n      // 添加页面\n      async handleAddPage(id) {\n        if(!id) {\n          await this._storeDispatch(CONFIRM_SAVE_CONFIG)\n        }\n        await this.$store.dispatch(KEY.VERSION_JUDGE)\n\n        this.pageId = id\n        this.$nextTick(() => {\n          this.$refs.pageModify.show()\n        })\n      },\n      handleTreeItemEdit(data) {\n        if (data.elementType === 'page-group') {\n          this.groupModifyData = data\n          this.handleAddFloder(data.pageDesignId)\n        } else {\n          this.pageModifyData = data\n          this.handleAddPage(data.pageDesignId)\n        }\n      },\n    },\n    created() {\n      this.getPageTree({ selectDefault: true })\n    },\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .page-panel::v-deep {\n    .page-search-bar {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 0 0 10px 10px;\n      position: absolute;\n      top: 0;\n      left: 0;\n      background: #fff;\n      z-index: 10;\n      width: 100%;\n      .autocomplete {\n        flex: 1;\n      }\n    }\n    .btn-group {\n      font-size: 18px;\n      padding: 0 10px;\n      .btn {\n        &:hover {\n          cursor: pointer;\n        }\n        &.group {\n          margin-left: 5px;\n        }\n      }\n    }\n    .page-tree {\n      margin-top: 37px;\n    }\n  }\n</style>\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTree.vue?vue&type=style&index=0&id=f8d676d6&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"09df0a0f\", content, true, {});","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=09e3c1cb&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=09e3c1cb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09e3c1cb\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <el-dialog\n    custom-class=\"low-code-dialog\"\n    class=\"group-modify\"\n    :close-on-click-modal=\"false\"\n    :title=\"id ? '修改分组' : '新增分组'\"\n    :visible.sync=\"visible\"\n    @close=\"handleResetForm\"\n    width=\"800px\"\n    top=\"5vh\"\n    v-element-screen\n  >\n    <n-form\n      class=\"group-modify-form\"\n      ref=\"dataGroupForm\"\n      :model=\"form\"\n      :rules=\"rules\"\n      @submit.native.prevent\n      label-width=\"100px\"\n    >\n      <n-form-item label=\"分组名称\" prop=\"name\">\n        <el-input\n          class=\"form-input\"\n          v-model=\"form.name\"\n          placeholder=\"请输入分组名称\"\n        />\n      </n-form-item>\n      <n-form-item label=\"排序\" prop=\"sort\">\n        <el-input-number v-model=\"form.sort\" />\n      </n-form-item>\n      <n-form-item label=\"是否隐藏\" prop=\"hidden\">\n        <el-switch on-text=\"隐藏\" off-text=\"显示\" v-model=\"form.hidden\" />\n      </n-form-item>\n    </n-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\"\n        >确 认\n      </el-button>\n      <el-button :loading=\"loading\" @click=\"close\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  //func\n  import { getValidators, required } from '@/utils/validateUtils'\n  import API from '@/api/application'\n\n  export default {\n    props: {\n      id: {\n        type: Number,\n        required: true,\n        default: 0,\n      },\n      data: {\n        type: Object,\n        default: {},\n      },\n    },\n    data() {\n      return {\n        vid: this.$route.query.vid,\n        visible: false,\n        loading: false,\n        form: {\n          name: '',\n          sort: 0,\n          hidden: false,\n        },\n        rules: {\n          name: getValidators([\n            {\n              message: '请输入分组名称',\n              include: required,\n              required: true,\n              trigger: 'change',\n            },\n          ]),\n        },\n      }\n    },\n    methods: {\n      setFormByProp() {\n        this.form = {\n          name: this.data.elementName,\n          sort: this.data.sort || 0,\n          hidden: this.data.hidden || false,\n        }\n      },\n      handleSubmit() {\n        this.$refs.dataGroupForm.validate(async (valid) => {\n          if (valid) {\n            const params = {\n              ...this.form,\n              id: this.id,\n              appDesignId: this.vid,\n            }\n            this.loading = true\n            this.$http({\n              url: this.id\n                ? API.appPageDesignUpdateGroup\n                : API.appPageDesignSaveGroup,\n              data: params,\n            })\n              .then((res) => {\n                if (res.msgCode == 200) {\n                  this.close()\n                  this.$emit('success')\n                  this.$message.success('操作成功')\n                }\n              })\n              .finally(() => {\n                this.loading = false\n              })\n          }\n        })\n      },\n      handleResetForm() {\n        this.$refs.dataGroupForm.resetFields()\n      },\n      show() {\n        if (this.id) {\n          this.setFormByProp()\n        }\n        this.visible = true\n      },\n      close() {\n        this.visible = false\n      },\n    },\n\n    computed: {},\n\n    watch: {},\n  }\n</script>\n<style lang=\"less\" scoped>\n  .group-modify {\n    /deep/ .el-dialog {\n    }\n    .group-modify-form {\n      .form-input {\n        width: 200px;\n      }\n      .form-textarea {\n        width: 500px;\n      }\n      .app-icon {\n        width: 80px;\n        height: 80px;\n        border-radius: 4px;\n      }\n    }\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{directives:[{name:\"element-screen\",rawName:\"v-element-screen\"}],staticClass:\"page-modify\",attrs:{\"custom-class\":\"low-code-dialog\",\"close-on-click-modal\":false,\"title\":_vm.id ? '修改页面' : '新增页面',\"visible\":_vm.visible,\"width\":\"800px\",\"top\":\"5vh\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.handleResetForm}},[_c('n-form',{ref:\"dataForm\",staticClass:\"page-modify-form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[(!_vm.id)?[_c('n-form-item',{attrs:{\"label\":\"新增模式\"}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},on:{\"change\":_vm.handleModeChange},model:{value:(_vm.createMode),callback:function ($$v) {_vm.createMode=$$v},expression:\"createMode\"}},[_c('el-radio-button',{attrs:{\"label\":\"1\"}},[_vm._v(\"全新创建\")]),_vm._v(\" \"),_c('el-radio-button',{attrs:{\"label\":\"2\"}},[_vm._v(\"从其他页面复制\")])],1)],1),_vm._v(\" \"),(_vm.createMode == 2)?[_c('n-form-item',{attrs:{\"label\":\"选择页面\"}},[_c('el-select',{attrs:{\"filterable\":\"\"},on:{\"change\":_vm.handleAppChange},model:{value:(_vm.selectedAppId),callback:function ($$v) {_vm.selectedAppId=$$v},expression:\"selectedAppId\"}},_vm._l((_vm.appList),function(app){return _c('el-option',{key:app.id,attrs:{\"label\":app.name,\"value\":app.id}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"filterable\":\"\",\"disabled\":!_vm.selectedAppId},on:{\"change\":_vm.handleVersionChange},model:{value:(_vm.selectedAppVersionId),callback:function ($$v) {_vm.selectedAppVersionId=$$v},expression:\"selectedAppVersionId\"}},_vm._l((_vm.versionList),function(item){return _c('el-option',{key:item.version,attrs:{\"label\":item.version,\"value\":item.id}})}),1),_vm._v(\" \"),_c('el-select',{attrs:{\"filterable\":\"\",\"disabled\":!_vm.selectedAppVersionId},on:{\"change\":_vm.handlePageChange},model:{value:(_vm.selectedPageId),callback:function ($$v) {_vm.selectedPageId=$$v},expression:\"selectedPageId\"}},_vm._l((_vm.pageList),function(page){return _c('el-option',{key:page.pageDesignId,attrs:{\"label\":page.elementName,\"value\":page.pageDesignId}})}),1)],1)]:_vm._e()]:_vm._e(),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"页面名称\",\"prop\":\"name\"}},[_c('el-input',{staticClass:\"form-input\",attrs:{\"placeholder\":\"请输入页面名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"分组\",\"prop\":\"parentId\"}},[_c('Select',{staticClass:\"form-select\",attrs:{\"options\":_vm.groupOptions,\"placeholder\":\"请选择分组\"},on:{\"change\":_vm.onChange},model:{value:(_vm.form.parentId),callback:function ($$v) {_vm.$set(_vm.form, \"parentId\", $$v)},expression:\"form.parentId\"}})],1),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sort\"}},[_c('el-input-number',{model:{value:(_vm.form.sort),callback:function ($$v) {_vm.$set(_vm.form, \"sort\", $$v)},expression:\"form.sort\"}})],1),_vm._v(\" \"),_c('n-form-item',{attrs:{\"label\":\"是否隐藏\",\"prop\":\"hidden\"}},[_c('el-switch',{attrs:{\"on-text\":\"隐藏\",\"off-text\":\"显示\"},model:{value:(_vm.form.hidden),callback:function ($$v) {_vm.$set(_vm.form, \"hidden\", $$v)},expression:\"form.hidden\"}})],1)],2),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确 认\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.close}},[_vm._v(\"取 消\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageModify.vue?vue&type=style&index=0&id=3e177db0&lang=less&scoped=true&\"","<template>\n  <el-dialog\n    custom-class=\"low-code-dialog\"\n    class=\"page-modify\"\n    :close-on-click-modal=\"false\"\n    :title=\"id ? '修改页面' : '新增页面'\"\n    :visible.sync=\"visible\"\n    @close=\"handleResetForm\"\n    width=\"800px\"\n    top=\"5vh\"\n    v-element-screen\n  >\n    <n-form\n      class=\"page-modify-form\"\n      ref=\"dataForm\"\n      :model=\"form\"\n      :rules=\"rules\"\n      @submit.native.prevent\n      label-width=\"100px\"\n    >\n      <template v-if=\"!id\">\n        <n-form-item label=\"新增模式\">\n          <el-radio-group v-model=\"createMode\" size=\"small\" @change=\"handleModeChange\">\n            <el-radio-button label=\"1\">全新创建</el-radio-button>\n            <el-radio-button label=\"2\">从其他页面复制</el-radio-button>\n          </el-radio-group>\n        </n-form-item>\n        <template v-if=\"createMode == 2\">\n          <n-form-item label=\"选择页面\" >\n            <el-select v-model=\"selectedAppId\" filterable @change=\"handleAppChange\">\n              <el-option v-for=\"app in appList\" :key=\"app.id\" :label=\"app.name\" :value=\"app.id\"></el-option>\n            </el-select>\n            <el-select v-model=\"selectedAppVersionId\" filterable :disabled=\"!selectedAppId\" @change=\"handleVersionChange\">\n              <el-option v-for=\"item in versionList\" :key=\"item.version\" :label=\"item.version\" :value=\"item.id\"></el-option>\n            </el-select>\n            <el-select v-model=\"selectedPageId\" filterable :disabled=\"!selectedAppVersionId\" @change=\"handlePageChange\">\n              <el-option v-for=\"page in pageList\" :key=\"page.pageDesignId\" :label=\"page.elementName\" :value=\"page.pageDesignId\"></el-option>\n            </el-select>\n          </n-form-item>\n        </template>\n      </template>\n\n      <n-form-item label=\"页面名称\" prop=\"name\">\n        <el-input\n          class=\"form-input\"\n          v-model=\"form.name\"\n          placeholder=\"请输入页面名称\"\n        />\n      </n-form-item>\n      <n-form-item label=\"分组\" prop=\"parentId\">\n        <Select\n          class=\"form-select\"\n          v-model=\"form.parentId\"\n          :options=\"groupOptions\"\n          placeholder=\"请选择分组\"\n          @change=\"onChange\"\n        />\n      </n-form-item>\n      <n-form-item label=\"排序\" prop=\"sort\">\n        <el-input-number v-model=\"form.sort\" />\n      </n-form-item>\n      <n-form-item label=\"是否隐藏\" prop=\"hidden\">\n        <el-switch on-text=\"隐藏\" off-text=\"显示\" v-model=\"form.hidden\" />\n      </n-form-item>\n    </n-form>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\"\n        >确 认\n      </el-button>\n      <el-button :loading=\"loading\" @click=\"close\">取 消</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  //func\n  import { getValidators, isValidJsonString, required } from '@/utils/validateUtils'\n\n  import API from '@/api/application'\n\n  import Select from '@/components/Select'\n  import { treeUtil } from '@/utils/tree-utils'\n  import { pageInject } from '@/renderer/tools/pageStore'\n  import { setAppVariables } from '@/utils'\n  export default {\n    inject: [...pageInject],\n    components: {\n      Select,\n    },\n    props: {\n      id: {\n        type: Number,\n        required: true,\n        default: 0,\n      },\n      data: {\n        type: Object,\n        default: {},\n      },\n    },\n    data() {\n      return {\n        vid: this.$route.query.vid,\n        visible: false,\n        loading: false,\n        createMode: 1,\n        groupOptions: [],\n        form: {\n          name: '',\n          // code: '',\n          sort: 0,\n          hidden: false,\n          // layoutType: 'normal',\n        },\n        allTree: [],\n        rules: {\n          name: getValidators([\n            {\n              message: '请输入页面名称',\n              include: required,\n              required: true,\n              trigger: 'change',\n            },\n          ]),\n          // code: getValidators([\n          //   {\n          //     message: '请输入页面编码',\n          //     include: required,\n          //     required: true,\n          //     trigger: 'change',\n          //   },\n          // ]),\n        },\n        selectedAppId: undefined,\n        selectedAppVersionId: undefined,\n        selectedPageId: undefined,\n        appList: [],\n        versionList: [],\n        pageList: []\n      }\n    },\n    methods: {\n      getGroupOptions() {\n        this.$http({\n          url: API.appPageDesignTree,\n          data: { appDesignId: this.vid },\n        }).then((res) => {\n          this.allTree = res.data\n          this.initSort()\n          this.allTree.some((item) => {\n            if (item.type === 2) {\n              this.groupOptions.push({\n                label: item.name,\n                value: item.id,\n              })\n            }\n          })\n        })\n      },\n      setFormByProp() {\n        this.form = {\n          name: this.data.elementName,\n          // code: this.data.code,\n          sort: this.data.sort || 0,\n          hidden: this.data.hidden || false,\n          parentId: this.data.parentId || '',\n        }\n      },\n      handleSubmit() {\n        this.$refs.dataForm.validate(async (valid) => {\n          if (valid) {\n            if (this.createMode == 2) {\n              if (!this.selectedPageId) {\n                this.$message.error('请选择复制的页面！')\n                return\n              }\n            }\n            const params = {\n              ...this.form,\n              appDesignId: this.vid,\n              id: this.id,\n              sourcePageId: this.createMode == 2 ? this.selectedPageId : undefined\n            }\n            this.loading = true\n            this.$http({\n              url: this.id\n                ? API.appPageDesignUpdatePage\n                : API.appPageDesignSavePage,\n              data: params,\n            })\n              .then((res) => {\n                if (res.msgCode == 200) {\n                  this.close()\n                  this.$emit('success', { pageAdd: !this.id, response: res.data })\n                  this.$message.success('操作成功')\n                  if (this.createMode == 2) {\n                    this.handleRefreshAppVariables()\n                  }\n                }\n              })\n              .finally(() => {\n                this.loading = false\n              })\n          }\n        })\n      },\n      handleResetForm() {\n        this.$refs.dataForm.resetFields()\n        this.groupOptions = []\n        this.selectedAppId = undefined\n        this.selectedAppVersionId = undefined\n        this.selectedPageId = undefined\n        this.appList = []\n        this.versionList = []\n        this.pageList = []\n        this.createMode = 1\n      },\n      show() {\n        if (this.id) {\n          this.setFormByProp()\n        }\n        this.visible = true\n        this.getGroupOptions()\n      },\n      close() {\n        this.visible = false\n      },\n      onChange(id) {\n        this.initSort(id)\n      },\n      // 新建时初始化sort\n      initSort(id) {\n        if(this.id) {\n          return\n        }\n        const { allTree } = this\n        let result = []\n        if(id) {\n          result = allTree.find(item => item.id === id)?.pages?.map(item => item.sort) || []\n        } else {\n          result = allTree.map(item => item.sort)\n        }\n        this.form.sort = result.length ? Math.max.apply(this, result) + 1 : 0\n      },\n      async handleModeChange(mode) {\n        if (mode == 2) {\n          this.selectedAppId = Number(this.$route.query.id)\n          this.selectedAppVersionId = Number(this.$route.query.vid)\n          await this.handleGetAppList()\n          await this.getVersionList()\n          await this.getPageList()\n        }\n      },\n      handleAppChange(appId) {\n        if (appId) {\n          this.selectedAppVersionId = undefined\n          this.selectedPageId = undefined\n          this.getVersionList()\n        }\n      },\n      handleVersionChange(version) {\n        if (version) {\n          this.getPageList()\n        }\n      },\n      handlePageChange(pageDesignId) {\n        if (pageDesignId) {\n          this.form.name = this.pageList.find(item => item.pageDesignId === pageDesignId).elementName\n        }\n      },\n      handleGetAppList() {\n        this.loading = true\n        return this.$http({\n          url: API.appInfoPage,\n          data: {\n            condition: {\n              categoryCode: '',\n              keyword: '',\n            },\n            pagination: {\n              pagenum: 1,\n              pagesize: 999,\n              sort: {\n                name: undefined,\n                type: undefined,\n              },\n              sorting: '',\n            },\n          },\n        })\n          .then(({data}) => {\n            const { records, rowCount } = data\n            this.appList = records\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      getVersionList() {\n        return this.$http({\n          url: API.appDesignList,\n          data: { appId: this.selectedAppId },\n        }).then((res) => {\n          let { data } = res\n          this.versionList = data.reverse()\n        })\n      },\n      getPageList() {\n        return this.$http({\n          url: API.appPageDesignTree,\n          data: { appDesignId: this.selectedAppVersionId },\n        }).then((res) => {\n          const pageTree = res.data.map((item) => this.treeMap(item, 0))\n          this.pageList = treeUtil.toList(pageTree).filter(item => item.elementType === 'page')\n        })\n      },\n      // 格式化接口返回的数据\n      treeMap(data, parentId) {\n        const hasChild = data.pages && data.pages.length > 0\n        // 可以根据实际开发需要返回自己想要的key值\n        return {\n          elementId: `${data.code}`,\n          pageDesignId: `${data.id}`,\n          elementType: data.type === 2 ? 'page-group' : 'page',\n          hidden: data.hidden,\n          sort: data.sort,\n          elementName: data.name,\n          parentId: parentId,\n          code: data.code ? data.code : '',\n          children: hasChild\n            ? data.pages.map((i) => this.treeMap(i, data.id))\n            : [],\n          type: data.type\n        }\n      },\n      handleRefreshAppVariables() {\n        this.loading = true\n        return this.$http({\n          url: API.appVariablesList,\n          data: {\n            appDesignId: Number(this.$route.query.vid),\n          },\n        })\n          .then(({ data }) => {\n            const entry = data.map((item) => ([item.name, {\n              value: typeof item.defaultValue === 'string' && isValidJsonString(item.defaultValue) ? JSON.parse(item.defaultValue) : item.defaultValue,\n              desc: item.description,\n              key: item.name,\n            }]))\n            const appVariables = Object.fromEntries(entry)\n            setAppVariables(appVariables)\n          })\n          .finally(() => {\n            this.loading = false\n          })\n      },\n      getElementPropsById(elementId) {\n        const realId = elementId === 'app' ? this.getStore().layoutData.elementId : elementId\n        return this.getStore().dynamicProps[realId] || {}\n      },\n    },\n  }\n</script>\n<style lang=\"less\" scoped>\n  .page-modify {\n    /deep/ .el-dialog {\n    }\n    .page-modify-form {\n      .form-input {\n        width: 200px;\n      }\n      .form-textarea {\n        width: 500px;\n      }\n      .app-icon {\n        width: 80px;\n        height: 80px;\n        border-radius: 4px;\n      }\n    }\n  }\n</style>\n","export * from \"-!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageTree.vue?vue&type=style&index=0&id=f8d676d6&lang=less&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModify.vue?vue&type=style&index=0&id=0c62b0aa&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4555f3a1\", content, true, {});","import { render, staticRenderFns } from \"./PageTree.vue?vue&type=template&id=f8d676d6&scoped=true&\"\nimport script from \"./PageTree.vue?vue&type=script&lang=js&\"\nexport * from \"./PageTree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageTree.vue?vue&type=style&index=0&id=f8d676d6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8d676d6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModify.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupModify.vue?vue&type=script&lang=js&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=09e3c1cb&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"24eca534\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-panel\"},[_c('div',{staticClass:\"page-search-bar\"},[_c('el-autocomplete',{staticClass:\"autocomplete\",attrs:{\"size\":\"mini\",\"popper-class\":\"my-autocomplete\",\"fetch-suggestions\":_vm.pageSearch,\"placeholder\":\"请输入页面名称\"},on:{\"select\":_vm.handleSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.elementName))])]}}]),model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})]),_vm._v(\" \"),_c('div',{staticClass:\"btn-group\"},[_c('img',{staticClass:\"btn\",attrs:{\"src\":_vm.$getImgPrefix('/design/svg/eidt-add-page.svg')},on:{\"click\":function($event){return _vm.handleAddPage(0)}}}),_vm._v(\" \"),_c('img',{staticClass:\"btn group\",attrs:{\"src\":_vm.$getImgPrefix('/design/svg/eidt-add-group.svg')},on:{\"click\":function($event){return _vm.handleAddFloder(0)}}})])],1),_vm._v(\" \"),_c('div',{staticClass:\"page-tree\"},[_c('page-tree',{attrs:{\"data\":_vm.pageTree,\"defaultSelect\":_vm.selectedPage.elementId},on:{\"handleTreeChange\":_vm.getPageTree,\"select\":_vm.handleSelect,\"loading\":function($event){return _vm.$emit('page-load', false)},\"handleTreeItemEdit\":_vm.handleTreeItemEdit,\"removeCache\":_vm.handleRemoveCache}})],1),_vm._v(\" \"),_c('group-modify',{ref:\"groupModify\",attrs:{\"id\":_vm.groupId,\"data\":_vm.groupModifyData},on:{\"success\":_vm.getPageTree}}),_vm._v(\" \"),_c('page-modify',{ref:\"pageModify\",attrs:{\"id\":_vm.pageId,\"data\":_vm.pageModifyData},on:{\"success\":_vm.getPageTree}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}