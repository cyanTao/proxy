{"version":3,"sources":["webpack:///./src/pages/application/app-design/components/TreePanel/index.vue?3998","webpack:///./src/pages/application/app-design/components/TreePanel/index.vue?ff35","webpack:///./src/pages/application/app-design/components/TreePanel/index.vue","webpack:///./src/pages/application/app-design/components/TreePanel/index.vue?d272","webpack:///./src/pages/application/app-design/components/TreePanel/index.vue?29c0","webpack:///src/pages/application/app-design/components/TreePanel/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticClass","attrs","data","defaultExpandedKeys","on","handleNodeExpand","handleNodeCollapse","handleClick","scopedSlots","_u","key","fn","class","nodeClass","style","$getImgPrefix","iconMap","elementType","_v","_s","elementName","includes","isInDynamicContainer","_e","$event","stopPropagation","toggleVisible","staticRenderFns","content","__esModule","default","module","i","locals","exports","add","component"],"mappings":"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","file":"84-941c78b42fca4defe959.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('n-tree',{ref:\"nodeTree\",staticClass:\"node-tree\",attrs:{\"data\":_vm.data,\"node-key\":\"elementId\",\"expand-on-click-node\":false,\"auto-expand-parent\":false,\"default-expanded-all\":false,\"default-expanded-keys\":_vm.defaultExpandedKeys,\"highlight-current\":\"\",\"draggable\":false,\"icon-class\":\"icon-right\"},on:{\"node-expand\":_vm.handleNodeExpand,\"node-collapse\":_vm.handleNodeCollapse,\"node-click\":_vm.handleClick},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _c('div',{staticClass:\"tree-node\",class:_vm.nodeClass(data),attrs:{\"data-zone\":((data.elementId) + \"_\" + (data.elementType) + \"_tree}\")}},[_c('div',{staticClass:\"node-name\"},[_c('div',{staticClass:\"node-icon\",style:((\"background-image: url(\" + (_vm.$getImgPrefix(_vm.iconMap[data.elementType])) + \")\"))}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(data.elementName))])]),_vm._v(\" \"),(!['page', 'dialog-container', 'slot', 'timer-container'].includes(data.elementType) && !_vm.isInDynamicContainer(data))?_c('i',{staticClass:\"node-hide iconfont icon-kai\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleVisible(data)}}}):_vm._e()])}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=951b8844&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ec151d24\", content, true, {});","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=951b8844&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=951b8844&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"951b8844\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=951b8844&lang=less&scoped=true&\"","<template>\n  <n-tree\n    ref=\"nodeTree\"\n    class=\"node-tree\"\n    :data=\"data\"\n    node-key=\"elementId\"\n    :expand-on-click-node=\"false\"\n    :auto-expand-parent=\"false\"\n    :default-expanded-all=\"false\"\n    :default-expanded-keys=\"defaultExpandedKeys\"\n    highlight-current\n    :draggable=\"false\"\n    @node-expand=\"handleNodeExpand\"\n    @node-collapse=\"handleNodeCollapse\"\n    icon-class=\"icon-right\"\n    @node-click=\"handleClick\"\n  >\n    <div\n      class=\"tree-node\"\n      :class=\"nodeClass(data)\"\n      slot-scope=\"{ data }\"\n      :data-zone=\"`${data.elementId}_${data.elementType}_tree}`\"\n    >\n      <div class=\"node-name\">\n        <div class=\"node-icon\" :style=\"`background-image: url(${$getImgPrefix(iconMap[data.elementType])})`\"></div>\n        <span>{{ data.elementName }}</span>\n      </div>\n      <i\n        v-if=\"!['page', 'dialog-container', 'slot', 'timer-container'].includes(data.elementType) && !isInDynamicContainer(data)\"\n        class=\"node-hide iconfont icon-kai\"\n        @click.stop=\"toggleVisible(data)\"\n      ></i>\n    </div>\n  </n-tree>\n</template>\n\n<script>\n  import {\n    getParentNodeByElementId, treeUtil,\n  } from '@/utils/tree-utils'\n  import {\n    ignoreDragTypes,\n    iconMap,\n    dialogTypes\n  } from '@/config/widgets'\n  import { TOGGLE_LAYOUT_VISIBLE } from '@/config/storeKey'\n  import _ from 'lodash';\n  import { pageInject } from '@/renderer/tools/pageStore';\n\n  export default {\n    name: 'TreePanel',\n    components: {},\n    inject: ['dndOptions', ...pageInject],\n    props: {\n      data: {\n        type: Array,\n        required: true,\n      },\n    },\n    data() {\n      return {\n        iconMap,\n        defaultExpandedKeys: []\n      }\n    },\n    computed: {\n      isDragging() {\n        return !!this.dndOptions.draggingWidget\n      }\n    },\n    watch: {\n      'dndOptions.selectedId'(id) {\n        this.$refs.nodeTree.setCurrentKey(id)\n      },\n    },\n    methods: {\n      handleClick(node) {\n        if (['dialog-container', 'timer-container'].includes(node.elementType)) {\n          return\n        }\n        this.dndOptions.selectedId = node.elementId\n      },\n      isHover(node) {\n        return this.dndOptions.hoverId === node.elementId\n      },\n      isBefore(node) {\n        return (\n          ['top', 'left'].includes(this.dndOptions.placement) &&\n          this.dndOptions.dropZoneId === node.elementId &&\n          !ignoreDragTypes.includes(node.elementType)\n        )\n      },\n      isAfter(node) {\n        return (\n          ['bottom', 'right'].includes(this.dndOptions.placement) &&\n          this.dndOptions.dropZoneId === node.elementId &&\n          !ignoreDragTypes.includes(node.elementType)\n        )\n      },\n      isDropTarget(node) {\n        return this.dndOptions.dropZoneId === node.elementId\n      },\n      isSelected(node) {\n        return this.dndOptions.selectedId === node.elementId\n      },\n      isSelf(node) {\n        return this.dndOptions.draggingWidget?.elementId === node.elementId\n      },\n      isHide(node) {\n        return this.getElementPropsById(node.elementId).isVisible === false\n      },\n      toggleVisible(n) {\n        this._storeCommit(TOGGLE_LAYOUT_VISIBLE, { elementId: n.elementId })\n      },\n      isAcceptDrop(node) {\n        return ![...dialogTypes, 'timer', 'dialog-container', 'timer-container'].includes(node.elementType)\n      },\n      isAcceptDrag(node) {\n        return ![...ignoreDragTypes, ...dialogTypes, 'timer'].includes(node.elementType)\n      },\n      isInDynamicContainer(node) {\n        const parentNode = getParentNodeByElementId(this.getStore().layoutData.children, node.elementId)\n        return parentNode && ['dynamic-container'].includes(parentNode.elementType)\n      },\n      updateExpandKeys() {\n        const keys = []\n        treeUtil.forEach(this.data, node => {\n          if (![...dialogTypes, 'timer-container', 'dialog-container'].includes(node.elementType)) {\n            keys.push(node.elementId)\n          }\n        })\n        this.defaultExpandedKeys = keys\n      },\n      handleNodeExpand(node) {\n        const result = _.uniq([...this.defaultExpandedKeys, node.elementId])\n        this.defaultExpandedKeys = result\n      },\n      handleNodeCollapse(node) {\n        this.defaultExpandedKeys = this.defaultExpandedKeys.filter(item => item !== node.elementId)\n      },\n      getElementPropsById(elementId) {\n        const realId = elementId === 'app' ? this.getStore().layoutData.elementId : elementId\n        return this.getStore().dynamicProps[realId] || {}\n      },\n      nodeClass(data) {\n        return {\n          'drop-zone': this.isAcceptDrop(data),\n          'is-accept-drag': this.isAcceptDrag(data),\n          // 'is-hover': this.isHover(data),\n          // 'is-before': this.isBefore(data),\n          // 'is-after': this.isAfter(data),\n          // 'is-drop-target': this.isDropTarget(data),\n          'is-selected': this.isSelected(data),\n          'is-self': this.isSelf(data),\n          'is-hide': this.isHide(data),\n        }\n      }\n    },\n    created() {\n      this.updateExpandKeys()\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  @import '~@/styles/index.less';\n\n  .node-tree::v-deep {\n    & > .el-tree-node > .el-tree-node__content {\n      background-color: transparent;\n    }\n\n    .el-tree-node__content {\n      height: auto;\n\n      & > .el-tree-node__expand-icon {\n        padding: 2px;\n        color: #999999;\n      }\n    }\n\n    .tree-node {\n      position: relative;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      width: 100%;\n      padding-right: 10px;\n\n      &:hover {\n        .node-hide {\n          display: block;\n        }\n      }\n\n      .node-name {\n        padding: 1px;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n      }\n\n      .node-icon {\n        margin-right: 4px;\n        width: 16px;\n        height: 16px;\n        background-size: 100% 100%;\n      }\n\n      .node-hide {\n        display: none;\n        font-size: 12px;\n      }\n\n      &.is-before {\n        &::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 6px;\n          background: @drop-main-color;\n        }\n      }\n\n      &.is-after {\n        &::after {\n          content: '';\n          display: block;\n          position: absolute;\n          bottom: 0;\n          left: 0;\n          width: 100%;\n          height: 6px;\n          background: @drop-main-color;\n        }\n      }\n\n      &.is-hover,\n      &.is-selected {\n        color: @drop-main-color;\n      }\n\n      &.is-drop-target {\n        background: @drop-target-color;\n      }\n\n      &.is-self {\n        opacity: 0.5;\n      }\n\n      &.is-hide {\n        opacity: 0.5;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":""}