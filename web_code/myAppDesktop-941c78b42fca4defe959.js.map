{"version":3,"sources":["webpack:///./src/pages/app-desktop/index.vue?556b","webpack:///src/pages/app-desktop/index.vue","webpack:///./src/pages/app-desktop/index.vue?40a1","webpack:///./src/pages/app-desktop/index.vue?8e6f","webpack:///./src/pages/app-desktop/index.vue?c8ef","webpack:///./src/pages/app-desktop/index.vue"],"names":["components","draggable","Upload","recommentImg","mixins","props","data","keyword","condition","loading","dialogLoading","appList","searchList","editMode","getImageUrl","statusFix","dialogVisible","isShortcut","form","id","appName","icon","link","shareIconOption","rules","mounted","methods","confirm","this","$refs","formRef","validate","valid","API","appShortcutSave","addShortcut","$nextTick","onEnd","appInstallSort","handleMode","viewDetail","upgrade","bind","item","appId","showUnpublicTips","decision","intoMarket","$router","push","name","computed","watch","val","getSearchList","content","__esModule","default","module","i","locals","exports","add","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","attrs","on","model","callback","$$v","_l","key","style","$getImgPrefix","_v","type","shortcutId","class","edit","installedAppStatus","$event","uninstall","_e","includes","_s","ref","staticStyle","$set","upload","recieveFile","slot","categoryName","staticRenderFns","component"],"mappings":"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","file":"myAppDesktop-941c78b42fca4defe959.js","sourcesContent":["export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1c08f06c&lang=less&scoped=true&\"","<template>\n  <div class=\"app-desktop\" v-loading=\"loading\">\n    <div class=\"list\">\n      <draggable\n        v-model=\"appList\"\n        group=\"appList\"\n        animation=\"300\"\n        draggable=\".edit\"\n        @end=\"onEnd\"\n      >\n        <transition-group>\n          <template v-for=\"item in appList\">\n            <div\n              v-if=\"item.id === 'appMarketId'\"\n              :key=\"item.id\"\n              class=\"list-item\"\n              @click=\"intoMarket\"\n            >\n              <div\n                class=\"icon\"\n                :style=\"`background-image: url(${$getImgPrefix('/myApp/app-market.png')})`\"\n              ></div>\n              <div class=\"app-name\">应用市场</div>\n            </div>\n            <div\n              v-else\n              class=\"list-item\"\n              :key=\"item.type + '-' + (item.appId || item.shortcutId)\"\n              @click=\"viewDetail(item)\"\n              :class=\"{\n                edit: editMode,\n                'app-disabled': item.installedAppStatus == 4,\n              }\"\n            >\n              <img\n                v-if=\"editMode\"\n                class=\"uninstall\"\n                :src=\"$getImgPrefix('/myApp/app-delete.png')\"\n                alt=\"\"\n                @click=\"uninstall(item)\"\n              />\n              <div\n                class=\"icon\"\n                :style=\"`background-image: url(${getImageUrl(item.icon, false, item.appId)})`\"\n              >\n                <span v-if=\"item.type === 'SHORTCUT'\" class=\"app-status shortcut\"></span>\n                <span\n                  class=\"app-status\"\n                  :class=\"`status${item.installedAppStatus}`\"\n                  v-else-if=\"\n                    [3, 4].includes(item.installedAppStatus)\n                  \"\n                  >{{ statusFix[item.installedAppStatus] }}</span\n                >\n              </div>\n              <div class=\"app-name\" :title=\"item.appName\">\n                {{ item.appName }}\n              </div>\n            </div>\n          </template>\n        </transition-group>\n      </draggable>\n    </div>\n    <div class=\"operate-area\">\n      <span\n        class=\"search\"\n        @click=\"\n          isShortcut = false\n          dialogVisible = true\n        \"\n      ></span>\n      <span class=\"add\" @click=\"addShortcut\"></span>\n      <span class=\"edit\" @click=\"handleMode\"></span>\n    </div>\n\n    <!-- 应用搜索开始 -->\n    <el-dialog\n      custom-class=\"low-code-dialog\"\n      :title=\"isShortcut ? '添加快捷方式' : '应用搜索'\"\n      :visible.sync=\"dialogVisible\"\n      :show-close=\"false\"\n      :modal=\"false\"\n      class=\"search-area\"\n      :close-on-click-modal=\"!isShortcut\"\n      :class=\"{ isShortcut }\"\n    >\n      <div class=\"search-area-content\">\n        <template v-if=\"!isShortcut\">\n          <el-row class=\"flex\">\n            <div style=\"padding-right: 15px; flex: 1\">\n              <el-input\n                class=\"search-input\"\n                v-model=\"keyword\"\n                placeholder=\"输入分类或应用名称搜索\"\n                clearable\n              >\n                <el-button\n                  slot=\"append\"\n                  icon=\"el-icon-search\"\n                  type=\"primary\"\n                  @click=\"getSearchList\"\n                ></el-button>\n              </el-input>\n            </div>\n            <el-checkbox v-model=\"condition\" @change=\"getSearchList\"\n              >仅快捷方式</el-checkbox\n            >\n          </el-row>\n          <div class=\"full-fill\" v-loading=\"dialogLoading\">\n            <div\n              v-for=\"item in searchList\"\n              class=\"result-item\"\n              :key=\"item.appId\"\n              @click=\"viewDetail(item)\"\n              v-ripple\n            >\n              <div\n                class=\"icon\"\n                :style=\"`background-image: url(${getImageUrl(item.icon, false, item.appId)})`\"\n              ></div>\n              <div class=\"app-info\">\n                <span class=\"name\" :title=\"item.appName\">\n                  {{ item.appName }}\n                </span>\n                <span class=\"category\" :title=\"item.categoryName\">\n                  {{\n                    item.type === 'SHORTCUT' ? '快捷方式' : item.categoryName\n                  }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </template>\n        <template v-else>\n          <el-form\n            v-loading=\"dialogLoading\"\n            ref=\"formRef\"\n            :model=\"form\"\n            :rules=\"rules\"\n            style=\"width: 600px\"\n            label-position=\"left\"\n            label-width=\"120px\"\n          >\n            <el-form-item label=\"快捷方式名称\" prop=\"appName\">\n              <el-input v-model=\"form.appName\" clearable></el-input>\n            </el-form-item>\n            <el-form-item label=\"快捷链接\" prop=\"link\">\n              <el-input v-model=\"form.link\" clearable></el-input>\n            </el-form-item>\n            <el-form-item label=\"快捷方式图标\" prop=\"icon\">\n              <Upload class=\"app-icon\" ref=\"upload\" v-model=\"form.icon\" />\n              <recomment-img :options=\"shareIconOption\" @select=\"$refs.upload.recieveFile($event)\" />\n            </el-form-item>\n          </el-form>\n        </template>\n      </div>\n      <span v-if=\"isShortcut\" slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button :loading=\"dialogLoading\" type=\"primary\" @click=\"confirm\"\n          >确 定</el-button\n        >\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport * as API from '@/api/applicationMarket'\nimport { getImageUrl, sleep } from '@/utils'\nimport appOperate from './mixins/appOperate'\nimport draggable from 'vuedraggable'\nimport breadcrumbControl from '@/mixins/breadcrumb-control'\nimport { authKey } from '@/router'\nimport Upload from '@/components/Upload'\nimport { getValidators, required, validURL } from '@/utils/validateUtils'\nimport recommentImg from '@/pages/application/components/recommentImg'\nexport default {\n  components: {\n    draggable,\n    Upload,\n    recommentImg\n  },\n  mixins: [appOperate, breadcrumbControl],\n  props: {},\n  data() {\n    return {\n      keyword: '',\n      condition: false,\n      loading: false,\n      dialogLoading: false,\n      // 应用桌面列表\n      appList: [],\n      // 搜索结果的列表\n      searchList: [],\n      editMode: false, // 编辑模式\n      getImageUrl,\n      statusFix: {\n        1: '未安装',\n        2: '已安装',\n        3: '待升级',\n        4: '已下架',\n      },\n      dialogVisible: false,\n      isShortcut: false,\n      form: {\n        id: 0,\n        appName: '',\n        icon: '',\n        link: '',\n      },\n      shareIconOption: [\n        this.$getImgPrefix('/myApp/bg-link.png')\n      ],\n      rules: {\n        appName: getValidators([\n          {\n            message: '请输入快捷方式名称',\n            include: required,\n            required: true,\n            trigger: 'change',\n          },\n        ]),\n        icon: getValidators([\n          {\n            message: '请选择快捷方式图标',\n            include: required,\n            required: true,\n            trigger: 'change',\n          },\n        ]),\n        link: getValidators([\n          {\n            message: '请输入快捷链接',\n            include: required,\n            required: true,\n            trigger: 'change',\n          },\n        ]),\n      },\n    }\n  },\n  async created() {\n    await this.getAppList()\n  },\n  mounted() {},\n  methods: {\n    confirm() {\n      this.$refs.formRef.validate((valid) => {\n        if (valid) {\n          this.dialogLoading = true\n          API.appShortcutSave(this.form)\n            .then(() => {\n              this.$message.success('添加成功')\n              this.dialogVisible = false\n              this.getAppList()\n            })\n            .finally(() => {\n              this.dialogLoading = false\n            })\n        }\n      })\n    },\n    addShortcut() {\n      this.dialogVisible = true\n      this.isShortcut = true\n      this.$nextTick(() => {\n        this.$refs.formRef.resetFields()\n      })\n    },\n    // 拖拽完成\n    onEnd() {\n      API.appInstallSort(\n        this.appList\n          .filter((item) => item.appId || item.shortcutId)\n          .map((item) => ({\n            appId: item.appId,\n            shortcutId: item.shortcutId,\n            type: item.type,\n          }))\n      )\n    },\n    handleMode() {\n      this.editMode = !this.editMode\n    },\n    async uninstall(item) {\n      await this.appUninstall(item)\n      this.getAppList()\n    },\n    viewDetail(item) {\n      if (this.editMode) {\n        return\n      }\n      const decision = {\n        2: async () => {\n          await sleep(300)\n          if (item.type === 'INSTALLED') {\n            this.useApp(item)\n          } else {\n            window.open(item.link)\n          }\n        },\n        3: this.upgrade.bind(this, item.appId),\n        4: this.showUnpublicTips.bind(this, item.appId),\n      }[item.installedAppStatus || 2]\n      decision()\n    },\n    async upgrade(appId) {\n      await this.appUpgrade(appId)\n      this.getAppList()\n    },\n    async showUnpublicTips(appId) {\n      const {\n        data: { appName, note, version },\n      } = await API.unpublishNote({\n        appId,\n      })\n\n      const h = this.$createElement\n      this.$msgbox({\n        title: '已下架',\n        message: h('div', { class: 'upgrade-desc-box' }, [\n          h('div', { class: 'upgrade-title' }, `${appName} ${version}`),\n          h('div', { class: 'upgrade-desc' }, note),\n        ]),\n      })\n    },\n    intoMarket() {\n      this.$router.push({\n        name: authKey.appMarket,\n      })\n    },\n    // 获取应用列表\n    async getAppList() {\n      this.loading = true\n      let res\n      try {\n        res = await API.appDesktop({\n          keyword: this.keyword,\n          onlyShortcut: false,\n        })\n      } catch (err) {\n        res = {\n          data: [],\n        }\n      }\n      this.appList = [{ id: 'appMarketId' }].concat(res.data)\n      this.loading = false\n    },\n    async getSearchList() {\n      this.dialogLoading = true\n      let res\n      try {\n        res = await API.appDesktop({\n          keyword: this.keyword,\n          onlyShortcut: this.condition,\n        })\n      } catch (err) {\n        res = {\n          data: [],\n        }\n      }\n      this.searchList = res.data\n      this.dialogLoading = false\n    },\n  },\n\n  computed: {},\n\n  watch: {\n    dialogVisible(val) {\n      val && this.getSearchList()\n    },\n  },\n}\n</script>\n<style lang='less' scoped>\n.app-desktop::v-deep {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-image: url('~@/static/myApp/bg.png');\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  .list {\n    width: 100%;\n    flex: 1;\n    overflow-y: auto;\n    padding: 50px 70px 20px 150px;\n    box-sizing: border-box;\n    display: flex;\n    flex-wrap: wrap;\n    .list-item {\n      display: inline-block;\n      position: relative;\n      width: 100px;\n      height: 140px;\n      margin-right: 15px;\n      margin-bottom: 15px;\n      padding: 10px;\n      transition: all 0.2s;\n      border-radius: 6px;\n      user-select: none;\n      cursor: pointer;\n      &.app-disabled::before {\n        width: 80px;\n        height: 80px;\n        position: absolute;\n        left: 10px;\n        top: 10px;\n        z-index: 1;\n        border-radius: 6px;\n        background: black;\n        opacity: 0.5;\n        content: '';\n      }\n      &:hover {\n        box-shadow: 0px 0px 10px gainsboro;\n        transform: translateY(-10px);\n        background-color: white;\n      }\n      &.edit {\n        cursor: move;\n        user-select: none;\n        box-shadow: 0px 0px 10px gainsboro;\n        background-color: white;\n        &:hover {\n          transform: none;\n        }\n      }\n      .icon {\n        border-radius: 6px;\n        width: 80px;\n        height: 80px;\n        position: relative;\n        background-size: 100% 100%;\n        .app-status {\n          position: absolute;\n          right: -4px;\n          top: -4px;\n          z-index: 2;\n          background: #ffffff;\n          border: 1px solid #e6e6e6;\n          font-family: PingFangSC-Regular;\n          font-size: 12px;\n          color: #999999;\n          height: 20px;\n          padding: 0 7px;\n          display: flex;\n          align-items: center;\n          box-sizing: border-box;\n          border-radius: 4px;\n          &.status3 {\n            background-color: #f5a623;\n            color: white;\n            border-color: transparent;\n          }\n          &.status4 {\n            background-color: #f56a6a;\n            color: white;\n            border-color: transparent;\n          }\n          &.shortcut {\n            position: absolute;\n            left: -4px;\n            bottom: -4px;\n            top: unset;\n            width: 20px;\n            height: 20px;\n            background-image: url('~@/static/myApp/share.png');\n            background-size: 100% 100%;\n            background-position: center;\n          }\n        }\n      }\n      .app-name {\n        font-family: PingFangSC-Medium;\n        font-size: 14px;\n        color: #333333;\n        font-weight: bold;\n        margin-top: 10px;\n        width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        text-align: center;\n      }\n      .uninstall {\n        position: absolute;\n        right: 0;\n        top: 0;\n        width: 20px;\n        height: 20px;\n        color: #666;\n        cursor: pointer;\n        z-index: 1;\n        font-size: 22px;\n        transform: translate(50%, -50%);\n      }\n    }\n  }\n\n  .operate-area {\n    display: flex;\n    align-items: center;\n    justify-content: space-around;\n    width: 268px;\n    height: 76px;\n    padding: 0 20px;\n    margin: 15px 0 10px 0;\n    background: rgba(255, 255, 255, 0.5);\n    box-shadow: 0 2px 8px 0 rgba(82, 122, 204, 0.15);\n    border-radius: 12px;\n    & > span {\n      width: 36px;\n      height: 36px;\n      background-size: 100% 100%;\n      background-repeat: no-repeat;\n      background-position: center;\n      cursor: pointer;\n    }\n    .search {\n      background-image: url('~@/static/myApp/search.png');\n    }\n    .add {\n      background-image: url('~@/static/myApp/add.png');\n    }\n    .edit {\n      background-image: url('~@/static/myApp/edit.png');\n    }\n  }\n\n  // 搜索应用\n  .search-area {\n    &.isShortcut {\n      .el-dialog {\n        width: 700px;\n      }\n    }\n    .el-dialog {\n      margin-top: 0 !important;\n      top: 50%;\n      transform: translateY(-50%);\n      height: 70%;\n      width: 1100px;\n      background: rgba(255, 255, 255, 0.96);\n      box-shadow: 0 2px 8px 0 rgba(82, 122, 204, 0.15);\n      border-radius: 12px;\n      display: flex;\n      flex-direction: column;\n      .el-dialog__header {\n        text-align: center;\n        background: transparent;\n        font-family: PingFangSC-Medium;\n        color: #333333;\n        letter-spacing: 0;\n        font-weight: 500;\n        padding: 20px;\n        padding-bottom: 0;\n        height: auto;\n        .el-dialog__title {\n          font-size: 20px;\n        }\n      }\n      .el-dialog__body {\n        background: white;\n        flex: 1;\n        overflow-y: auto;\n        border-radius: 12px;\n      }\n    }\n    .search-area-content {\n      width: 100%;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      .full-fill {\n        flex: 1;\n        width: 100%;\n        overflow-y: auto;\n        margin-top: 20px;\n        .result-item {\n          background: #ffffff;\n          border: 1px solid #dde0e6;\n          border-radius: 5px;\n          width: 240px;\n          height: 90px;\n          display: inline-block;\n          margin-right: 20px;\n          margin-bottom: 20px;\n          padding: 15px;\n          box-sizing: border-box;\n          cursor: pointer;\n          .icon {\n            width: 60px;\n            height: 60px;\n            border-radius: 6px;\n            background-size: 100% 100%;\n            float: left;\n          }\n          .app-info {\n            float: left;\n            margin-left: 20px;\n            width: 128px;\n            .name {\n              display: block;\n              font-family: PingFangSC-Medium;\n              font-size: 16px;\n              color: #333333;\n              letter-spacing: 0;\n              font-weight: 500;\n            }\n            .category {\n              display: inline-block;\n              margin-top: 5px;\n              background: #ffffff;\n              border: 1px solid #e6e6e6;\n              border-radius: 10px;\n              font-family: PingFangSC-Regular;\n              font-size: 12px;\n              color: #999999;\n              letter-spacing: 0;\n              font-weight: 400;\n              padding: 3px 7px;\n              max-width: 100%;\n              white-space: nowrap;\n              overflow: hidden;\n              text-overflow: ellipsis;\n            }\n          }\n        }\n      }\n      .el-row {\n        &.flex {\n          display: flex;\n          align-items: center;\n        }\n      }\n      .search-input {\n        margin-right: 15px;\n        .el-input__inner,\n        .el-input-group__append {\n          height: 36px;\n          font-size: 12px;\n          letter-spacing: 0;\n          font-weight: 400;\n        }\n        .el-input-group__append {\n          padding: 0 20px;\n          font-size: 16px;\n          color: #ffffff;\n          background: #3f92fe;\n          border: none;\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1c08f06c&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"40343574\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"app-desktop\"},[_c('div',{staticClass:\"list\"},[_c('draggable',{attrs:{\"group\":\"appList\",\"animation\":\"300\",\"draggable\":\".edit\"},on:{\"end\":_vm.onEnd},model:{value:(_vm.appList),callback:function ($$v) {_vm.appList=$$v},expression:\"appList\"}},[_c('transition-group',[_vm._l((_vm.appList),function(item){return [(item.id === 'appMarketId')?_c('div',{key:item.id,staticClass:\"list-item\",on:{\"click\":_vm.intoMarket}},[_c('div',{staticClass:\"icon\",style:((\"background-image: url(\" + (_vm.$getImgPrefix('/myApp/app-market.png')) + \")\"))}),_vm._v(\" \"),_c('div',{staticClass:\"app-name\"},[_vm._v(\"应用市场\")])]):_c('div',{key:item.type + '-' + (item.appId || item.shortcutId),staticClass:\"list-item\",class:{\n              edit: _vm.editMode,\n              'app-disabled': item.installedAppStatus == 4,\n            },on:{\"click\":function($event){return _vm.viewDetail(item)}}},[(_vm.editMode)?_c('img',{staticClass:\"uninstall\",attrs:{\"src\":_vm.$getImgPrefix('/myApp/app-delete.png'),\"alt\":\"\"},on:{\"click\":function($event){return _vm.uninstall(item)}}}):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"icon\",style:((\"background-image: url(\" + (_vm.getImageUrl(item.icon, false, item.appId)) + \")\"))},[(item.type === 'SHORTCUT')?_c('span',{staticClass:\"app-status shortcut\"}):(\n                  [3, 4].includes(item.installedAppStatus)\n                )?_c('span',{staticClass:\"app-status\",class:(\"status\" + (item.installedAppStatus))},[_vm._v(_vm._s(_vm.statusFix[item.installedAppStatus]))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"app-name\",attrs:{\"title\":item.appName}},[_vm._v(\"\\n              \"+_vm._s(item.appName)+\"\\n            \")])])]})],2)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"operate-area\"},[_c('span',{staticClass:\"search\",on:{\"click\":function($event){_vm.isShortcut = false\n        _vm.dialogVisible = true}}}),_vm._v(\" \"),_c('span',{staticClass:\"add\",on:{\"click\":_vm.addShortcut}}),_vm._v(\" \"),_c('span',{staticClass:\"edit\",on:{\"click\":_vm.handleMode}})]),_vm._v(\" \"),_c('el-dialog',{staticClass:\"search-area\",class:{ isShortcut: _vm.isShortcut },attrs:{\"custom-class\":\"low-code-dialog\",\"title\":_vm.isShortcut ? '添加快捷方式' : '应用搜索',\"visible\":_vm.dialogVisible,\"show-close\":false,\"modal\":false,\"close-on-click-modal\":!_vm.isShortcut},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"search-area-content\"},[(!_vm.isShortcut)?[_c('el-row',{staticClass:\"flex\"},[_c('div',{staticStyle:{\"padding-right\":\"15px\",\"flex\":\"1\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"输入分类或应用名称搜索\",\"clearable\":\"\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\",\"type\":\"primary\"},on:{\"click\":_vm.getSearchList},slot:\"append\"})],1)],1),_vm._v(\" \"),_c('el-checkbox',{on:{\"change\":_vm.getSearchList},model:{value:(_vm.condition),callback:function ($$v) {_vm.condition=$$v},expression:\"condition\"}},[_vm._v(\"仅快捷方式\")])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dialogLoading),expression:\"dialogLoading\"}],staticClass:\"full-fill\"},_vm._l((_vm.searchList),function(item){return _c('div',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],key:item.appId,staticClass:\"result-item\",on:{\"click\":function($event){return _vm.viewDetail(item)}}},[_c('div',{staticClass:\"icon\",style:((\"background-image: url(\" + (_vm.getImageUrl(item.icon, false, item.appId)) + \")\"))}),_vm._v(\" \"),_c('div',{staticClass:\"app-info\"},[_c('span',{staticClass:\"name\",attrs:{\"title\":item.appName}},[_vm._v(\"\\n                \"+_vm._s(item.appName)+\"\\n              \")]),_vm._v(\" \"),_c('span',{staticClass:\"category\",attrs:{\"title\":item.categoryName}},[_vm._v(\"\\n                \"+_vm._s(item.type === 'SHORTCUT' ? '快捷方式' : item.categoryName)+\"\\n              \")])])])}),0)]:[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.dialogLoading),expression:\"dialogLoading\"}],ref:\"formRef\",staticStyle:{\"width\":\"600px\"},attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"快捷方式名称\",\"prop\":\"appName\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.appName),callback:function ($$v) {_vm.$set(_vm.form, \"appName\", $$v)},expression:\"form.appName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"快捷链接\",\"prop\":\"link\"}},[_c('el-input',{attrs:{\"clearable\":\"\"},model:{value:(_vm.form.link),callback:function ($$v) {_vm.$set(_vm.form, \"link\", $$v)},expression:\"form.link\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"快捷方式图标\",\"prop\":\"icon\"}},[_c('Upload',{ref:\"upload\",staticClass:\"app-icon\",model:{value:(_vm.form.icon),callback:function ($$v) {_vm.$set(_vm.form, \"icon\", $$v)},expression:\"form.icon\"}}),_vm._v(\" \"),_c('recomment-img',{attrs:{\"options\":_vm.shareIconOption},on:{\"select\":function($event){return _vm.$refs.upload.recieveFile($event)}}})],1)],1)]],2),_vm._v(\" \"),(_vm.isShortcut)?_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"loading\":_vm.dialogLoading,\"type\":\"primary\"},on:{\"click\":_vm.confirm}},[_vm._v(\"确 定\")])],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1c08f06c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1c08f06c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c08f06c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}