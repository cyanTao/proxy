(window["webpackJsonp_/@project/web_code"]=window["webpackJsonp_/@project/web_code"]||[]).push([[77],{"F8/L":function(e,t,n){"use strict";n.r(t);var i=n("Zf81"),o=n("el1i");for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("sgxF");var r=n("KHd+"),s=Object(r.a)(o.default,i.a,i.b,!1,null,"3f81374b",null);t.default=s.exports},Rb1L:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,r=i(n("o0o1")),s=i(n("HaE+")),l=i(n("KQm4")),c=n("0O+R"),d=n("ZDQs"),u=n("cCei"),p=n("CDKT"),m=(i(n("YLtl")),n("inkn")),f=i(n("ZQwl")),g=n("vu0G"),h=n("7C5+"),v={name:"CoverWrapper",inject:["dndOptions"].concat((0,l.default)(h.pageInject)),data:function(){return{wrapperStyle:void 0,controllerStyle:void 0}},computed:{layoutData:function(){return this.getStore().layoutData},dynamicProps:function(){return this.getStore().dynamicProps},elementProps:function(){return this.dynamicProps[this.dndOptions.selectedId]||{}},isDragging:function(){return!!this.dndOptions.draggingWidget},isResizable:function(){var e=(0,c.getParentNodeByElementId)(this.layoutData,this.elementProps.elementId);return e&&["layout-container","form-container"].includes(e.elementType)},isShowResizableLeft:function(){return!0},isShowResizableRight:function(){return!0},isShowCopy:function(){return!d.ignoreCopyTypes.includes(this.elementProps.elementType)&&!this.isInDynamicContainer},isShowDelete:function(){return!d.ignoreDeleteTypes.includes(this.elementProps.elementType)},isDialog:function(){return d.dialogTypes.includes(this.elementProps.elementType)},isTimer:function(){return"timer"===this.elementProps.elementType},isShowFavorite:function(){return this.isShowCopy},isInDynamicContainer:function(){var e=(0,c.getParentNodeByElementId)(this.layoutData.children,this.elementProps.elementId);return e&&["dynamic-container"].includes(e.elementType)},isAcceptDrag:function(){return![].concat((0,l.default)(d.ignoreDragTypes),(0,l.default)(d.dialogTypes),["timer"]).includes(this.elementProps.elementType)&&!this.elementProps.isIgnoreDrag},isPage:function(){return"page"===this.elementProps.elementType}},watch:{"elementProps.elementId":{handler:function(e,t){this.updateCurrentDom()}}},methods:{handleUpdateWrapperStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){var t=this.elementProps,n=t.elementId,i=t.elementType;a=document.getElementById("app-design-page-main"),o=document.querySelector('.page-canvas [data-zone="'.concat(n,"_").concat(i,'"]'))}if(!this.isDragging)if(o){var r=a.getBoundingClientRect(),s=r.left,l=r.top,c=r.width,d=o.getBoundingClientRect(),u=d.left,p=d.top,m=d.width,f=d.height,g=u-s,h=p-l;if(this.wrapperStyle={left:"".concat(g-2,"px"),top:"".concat(h-2,"px"),width:"".concat(m+4,"px"),height:"".concat(f+4,"px"),display:"block"},u-s<=50&&m<120)this.controllerStyle={left:"0",right:"unset"};else if(u+m-(s+c)>=10){var v=u+m-(s+c);this.controllerStyle={right:"".concat(v,"px"),left:"unset"}}else this.controllerStyle=void 0}else this.wrapperStyle=void 0},loopUpdate:function(){var e=this;this.handleUpdateWrapperStyle(),clearTimeout(this.updateTimer),this.updateTimer=setTimeout((function(){e.loopUpdate()}),200)},handleCopy:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var n,i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.getGlobalConfig.call(e),t.next=3,e._storeDispatch(u.HANDLE_COPY,{elementId:e.elementProps.elementId});case 3:i=t.sent,(0,m.update)({oldVal:e.elementProps.elementId,val:i.elementId,extra:{oldVal:n,val:m.getGlobalConfig.call(e)},callback:function(e){f.default.$emit(g.HIGH_LIGHT,e)}});case 5:case"end":return t.stop()}}),t)})))()},handleAddToFavorite:function(){this.$emit("addToFavorite",this.elementProps.elementId)},handleAddToPublish:function(){this.$emit("addToPublish",this.elementProps.elementId)},handleToggleHidden:function(){this._storeCommit(u.TOGGLE_LAYOUT_VISIBLE,{elementId:this.elementProps.elementId,isVisible:![!0,void 0].includes(this.elementProps.isVisible)})},handleDelete:function(){c.removeLayoutElement.call(this,this.elementProps.elementId,this.layoutData.elementId)},updateCurrentDom:function(){var e=this.elementProps.elementId,t=this.elementProps.elementType;o=document.querySelector('.page-canvas [data-zone="'.concat(e,"_").concat(t,'"]'))}},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){var t=e.elementProps,n=t.elementId,i=t.elementType;a=document.getElementById("app-design-page-main"),o=document.querySelector('.page-canvas [data-zone="'.concat(n,"_").concat(i,'"]')),e.loopUpdate()})),window.addEventListener(p.DRAG_END_EVENT_NAME,e.updateCurrentDom)}))},beforeDestroy:function(){clearTimeout(this.updateTimer),window.removeEventListener(p.DRAG_END_EVENT_NAME,this.updateCurrentDom)}};t.default=v},VbFX:function(e,t,n){var i=n("z44e");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n("SZ7m").default)("620c4612",i,!0,{})},Zf81:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cover-wrapper",class:{"is-resizable":e.isResizable,"is-dragging":e.isDragging,"is-dialog":e.isDialog},style:e.wrapperStyle},[n("div",{staticClass:"control-button-wrapper",class:{"is-page":e.isPage},style:e.controllerStyle},[n("span",{staticClass:"component-name no-hover",class:{"is-accept-drag":e.isAcceptDrag},attrs:{"data-zone":e.elementProps.elementId+"_"+e.elementProps.elementType}},[e._v(e._s(e.elementProps.elementName))]),e._v(" "),e.isShowFavorite?n("div",{staticClass:"icon_container",attrs:{title:"保存为模板"}},[n("img",{attrs:{src:e.$getImgPrefix("/design/svg/save.svg")},on:{click:function(t){return t.stopPropagation(),e.handleAddToFavorite.apply(null,arguments)}}})]):e._e(),e._v(" "),e.isShowCopy?n("div",{staticClass:"icon_container",attrs:{title:"复制组件"}},[n("img",{attrs:{src:e.$getImgPrefix("/design/svg/com-copy.svg")},on:{click:function(t){return t.stopPropagation(),e.handleCopy.apply(null,arguments)}}})]):e._e(),e._v(" "),e.isDialog||e.isTimer?n("div",{staticClass:"icon_container"},[n("i",{staticClass:"iconfont icon-kai",on:{click:function(t){return t.stopPropagation(),e.handleToggleHidden.apply(null,arguments)}}})]):e._e(),e._v(" "),e.isShowDelete?n("div",{staticClass:"icon_container",attrs:{title:"删除组件"}},[n("img",{attrs:{src:e.$getImgPrefix("/design/svg/com-delete.svg")},on:{click:function(t){return t.stopPropagation(),e.handleDelete.apply(null,arguments)}}})]):e._e()]),e._v(" "),e.isResizable&&!e.isDragging?[e.isShowResizableRight?n("div",{staticClass:"resize-handle right no-hover",attrs:{"data-zone":e.elementProps.elementId+"_"+e.elementProps.elementType}}):e._e()]:e._e()],2)},o=[]},el1i:function(e,t,n){"use strict";n.r(t);var i=n("Rb1L"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t.default=o.a},sgxF:function(e,t,n){"use strict";n("VbFX")},z44e:function(e,t,n){}}]);
//# sourceMappingURL=/@project/web_code/77-941c78b42fca4defe959.js.map