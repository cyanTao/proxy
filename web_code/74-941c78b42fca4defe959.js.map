{"version":3,"sources":["webpack:///src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue","webpack:///./src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue?bc9a","webpack:///./src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue?0e23","webpack:///./src/components/ConfigWrapper/index.vue?e508","webpack:///./src/components/ConfigWrapper/index.vue?b752","webpack:///./src/components/ConfigWrapper/index.vue","webpack:///./src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue","webpack:///./src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue?2eee","webpack:///./src/pages/application/app-design/components/ConfigPanel/PropsPanel.vue?d9c1","webpack:///src/components/ConfigWrapper/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","nativeOn","$event","preventDefault","model","value","callback","$$v","activeCollapses","expression","_l","collapse","getCoolapseConfigs","length","isShowConfig","key","name","title","config","propKey","style","_e","_v","_b","default","elementProps","current","elementId","on","update","staticRenderFns","content","__esModule","module","i","locals","exports","add","currentElement","tag","updateElementProps","Object","assign","$props","compoentProps","component","props","type","String","defaultValue","Number","placeholder","tip","vue","optionkey","options","data","watchFn","extra","computed","alert","methods","watch","immediate","deep","handler","undefined","$watch"],"mappings":"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","file":"74-941c78b42fca4defe959.js","sourcesContent":["<template>\n  <n-form\n    size=\"mini\"\n    class=\"props-panel\"\n    inline\n    label-position=\"left\"\n    @submit.native.prevent\n  >\n    <el-collapse v-model=\"activeCollapses\">\n      <template v-for=\"collapse in collapses\">\n        <el-collapse-item\n          v-if=\"getCoolapseConfigs(collapse).length && isShowConfig(collapse)\"\n          :key=\"collapse.name\"\n          :title=\"collapse.title\"\n          :name=\"collapse.name\"\n        >\n        <template v-for=\"config in getCoolapseConfigs(collapse)\">\n          <div v-if=\"config.splitline\" :style=\"config.splitlinestlye\" class=\"config-dot-line\" :key=\"config.propKey\"></div>\n          <config-wrapper\n            :default-value=\"config.default\"\n            :key=\"config.propKey\"\n            :element-props=\"elementProps\"\n            :elementId=\"current.elementId\"\n            v-bind=\"config\"\n            @update=\"update\"\n          ></config-wrapper>\n        </template>\n        </el-collapse-item>\n      </template>\n    </el-collapse>\n  </n-form>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import ConfigWrapper from '@/components/ConfigWrapper/index'\n  import { getNodeByElementId, getParentNodeByElementId, getParentNodeListByElementId } from '@/utils/tree-utils'\n  import { getPropsConfig, getPropsValues } from '@/renderer/tools/config'\n  import _ from 'lodash'\n  import EventBus, { globalEmit } from '@/renderer/tools/eventBus'\n  import { PROPS, BIND_PROPS } from '@/config/eventKey'\n  import { pageInject } from '@/renderer/tools/pageStore'\n  export default {\n    name: 'PropsPanel',\n    components: {\n      ConfigWrapper,\n    },\n    inject: ['dndOptions', ...pageInject],\n    data() {\n      return {\n        activeCollapses: [\n          'basic',\n          'dataConfig',\n          'formConfig',\n          'slotConfig',\n          'layoutConfig',\n          'widgetConfig',\n          'dataColumn',\n          'paginationConfig',\n          'switch',\n          'verification',\n          'pageVariable',\n          'exportFunctions',\n          'slotRules'\n        ],\n        collapses: [\n          {\n            name: 'basic',\n            title: '基本属性',\n          },\n          {\n            name: 'dataConfig',\n            title: '数据配置',\n          },\n          {\n            name: 'slotRules',\n            title: '渲染规则配置',\n          },\n          {\n            name: 'dataColumn',\n            title: '数据列',\n          },\n          {\n            name: 'formConfig',\n            title: '表单配置',\n          },\n          {\n            name: 'slotConfig',\n            title: '数据配置',\n          },\n          {\n            name: 'layoutConfig',\n            title: '布局配置',\n          },\n          {\n            name: 'widgetConfig',\n            title: '组件配置',\n          },\n          {\n            name: 'paginationConfig',\n            title: '分页配置',\n          },\n          {\n            name: 'sortConfig',\n            title: '排序配置',\n          },\n          {\n            name: 'mergeCells',\n            title: '合并单元格配置',\n          },\n          {\n            name: 'switch',\n            title: '更多配置',\n          },\n          {\n            name: 'verification',\n            title: '验证配置',\n          },\n          {\n            name: 'pageVariable',\n            title: '页面变量配置',\n          },\n          {\n            name: 'exportFunctions',\n            title: '页面暴露函数',\n          },\n        ],\n        elementProps: {}\n      }\n    },\n    computed: {\n      layoutData: {\n        get() {\n          return this.getStore().layoutData\n        },\n      },\n      current() {\n        const selectedId = this.dndOptions.selectedId\n        const layoutData = this.layoutData\n        return getNodeByElementId(layoutData, selectedId) || layoutData\n      },\n      isInSlot() {\n        const parent = getParentNodeByElementId(\n          this.layoutData,\n          this.elementProps.elementId\n        )\n        return parent && ['slot'].includes(parent.elementType) && ['data'].includes(this.getElementPropsById(parent.elementId).slotType)\n      },\n      isTableController() {\n        const target = this.getElementPropsById(this.elementProps.elementId)\n        const parentNode = getParentNodeByElementId(\n          this.layoutData,\n          this.elementProps.elementId\n        ) || {}\n        return target.elementType === 'slot' && this.elementProps.elementName === '操作列' && target.slotName === 'controller' && parentNode && parentNode.elementType === 'table'\n      },\n      isDataSlot() {\n        const {slotType} = this.elementProps\n        return ['data'].includes(slotType)\n      },\n      isInForm() {\n        const parentList = getParentNodeListByElementId(\n          this.layoutData,\n          this.elementProps.elementId\n        )\n        return parentList && parentList.some(item => ['form-container'].includes(item.elementType))\n      },\n    },\n    watch: {\n      'current.elementId': {\n        immediate: true,\n        handler() {\n          this.initProps()\n        }\n      }\n    },\n    methods: {\n      configList() {\n        const { elementType, elementVersion } = this.current\n        return getPropsConfig({ elementType, elementVersion })\n      },\n      initProps() {\n        const { elementId, elementType, elementVersion } = this.current\n        const props = {...this.current, ...this.getElementPropsById(elementId)}\n        this.$delete(props, 'children')\n        this.elementProps = _.cloneDeep({ ...getPropsValues.call(this, { elementType, elementVersion }), ...props })\n      },\n      update(data, { pushHistory = true, callback = () => {}, ...extra } = {}) {\n        Object.keys(data).forEach(key => {\n          Vue.set(this.elementProps, key, data[key])\n        })\n        globalEmit.call(this, PROPS, { elementId: this.current.elementId, data, extra, pushHistory, callback })\n      },\n      // 根据configWrapper不同类型返回对应的数组\n      getCoolapseConfigs(data) {\n        const res = this.configList().reduce((prev, cur) => {\n          return cur.groupbelong === data.name ? prev.concat(cur) : prev\n        }, [])\n        return res || []\n      },\n      isShowConfig(data) {\n        switch (data.name) {\n          case 'slotConfig':\n            return this.isInSlot\n          case 'formConfig':\n            return this.isInForm\n          case 'slotRules':\n            return this.isDataSlot || this.isTableController\n          default:\n            return true\n        }\n      },\n      getElementPropsById(elementId) {\n        const realId = elementId === 'app' ? this.getStore().layoutData.elementId : elementId\n        return this.getStore().dynamicProps[realId] || {}\n      }\n    },\n    mounted () {\n      EventBus.$on(BIND_PROPS, () => {\n        // 为什么不用传进来的数据呢, 因为有些更改是只改变了个别数据,如果全替换,可能会导致某些字段缺失\n        this.initProps()\n      })\n    },\n    beforeDestroy () {\n      EventBus.$off(BIND_PROPS)\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .props-panel::v-deep {\n    width: 100%;\n    padding: 0;\n    .el-collapse {\n      border-bottom: none;\n      border-left: none;\n      border-right: none;\n    }\n    .el-collapse-item__header {\n      padding-right: 0;\n      background: #f0f6ff;\n      height: 30px;\n      line-height: 30px;\n      font-weight: 700;\n    }\n    .config-dot-line {\n      height: 0px;\n      width: 100%;\n      border-top: 1px dashed #b4b4b4;\n      margin-top: 7px;\n      margin-bottom: 15px;\n    }\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('n-form',{staticClass:\"props-panel\",attrs:{\"size\":\"mini\",\"inline\":\"\",\"label-position\":\"left\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[_c('el-collapse',{model:{value:(_vm.activeCollapses),callback:function ($$v) {_vm.activeCollapses=$$v},expression:\"activeCollapses\"}},[_vm._l((_vm.collapses),function(collapse){return [(_vm.getCoolapseConfigs(collapse).length && _vm.isShowConfig(collapse))?_c('el-collapse-item',{key:collapse.name,attrs:{\"title\":collapse.title,\"name\":collapse.name}},[_vm._l((_vm.getCoolapseConfigs(collapse)),function(config){return [(config.splitline)?_c('div',{key:config.propKey,staticClass:\"config-dot-line\",style:(config.splitlinestlye)}):_vm._e(),_vm._v(\" \"),_c('config-wrapper',_vm._b({key:config.propKey,attrs:{\"default-value\":config.default,\"element-props\":_vm.elementProps,\"elementId\":_vm.current.elementId},on:{\"update\":_vm.update}},'config-wrapper',config,false))]})],2):_vm._e()]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropsPanel.vue?vue&type=style&index=0&id=164b7c86&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0edb0e62\", content, true, {});","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"config-wrapper\"},[_c(_vm.currentElement,_vm._b({tag:\"component\",on:{\"update\":_vm.updateElementProps}},'component',Object.assign({}, _vm.$props, {elementProps: _vm.compoentProps}),false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=85bbed3c&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"85bbed3c\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./PropsPanel.vue?vue&type=template&id=164b7c86&scoped=true&\"\nimport script from \"./PropsPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./PropsPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PropsPanel.vue?vue&type=style&index=0&id=164b7c86&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"164b7c86\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropsPanel.vue?vue&type=style&index=0&id=164b7c86&lang=less&scoped=true&\"","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropsPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PropsPanel.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"config-wrapper\">\n    <component\n      :is=\"currentElement\"\n      v-bind=\"{ ...$props, elementProps: compoentProps }\"\n      @update=\"updateElementProps\"\n    ></component>\n  </div>\n</template>\n\n<script>\nimport configComponents from './components'\nimport _ from 'lodash'\nexport default {\n  name: 'ConfigWrapper',\n  props: {\n    propKey: {\n      type: String,\n    },\n    defaultValue: {\n      type: [Object, String, Number],\n    },\n    name: {\n      type: String,\n    },\n    placeholder: {\n      type: String,\n      default: '',\n    },\n    tip: {\n      type: String,\n    },\n    vue: {\n      type: String,\n    },\n    elementId: {\n      type: String,\n    },\n    elementProps: {\n      type: Object,\n      default: () => ({}),\n    },\n    optionkey: {\n      type: String,\n    },\n    options: {\n      type: Object,\n    }\n  },\n  data() {\n    return {\n      compoentProps: {},\n      watchFn: null,\n      extra: {},\n    }\n  },\n  computed: {\n    currentElement() {\n      if (this.vue && !configComponents[this.vue]) {\n        alert('组件丢失: ' + this.vue)\n      }\n      // 例如value这些没有attrName的, 不能显示在配置项,但是变量要暴露出去给别人选择\n      if (!this.name) {\n        return null\n      }\n      return configComponents[this.vue]\n    },\n  },\n  methods: {\n    updateElementProps(data, extra) {\n      this.compoentProps = data\n      this.extra = extra\n    },\n  },\n  watch: {\n    /**这里的操作主要为了解决一个问题: 子组件太多直接改变深层json结构的操作,\n       而没有$emit父组件去改父组件的状态, 所以这里初始化克隆一个最初始的,\n       在深watch改变了属性的时候同步让父组件去改变值\n    **/\n    elementProps: {\n      immediate: true,\n      deep: true,\n      handler(val) {\n        this.compoentProps = _.cloneDeep(val)\n        this.extra = undefined\n        if (typeof this.watchFn === 'function') {\n          this.watchFn()\n        }\n        this.watchFn = this.$watch(\n          'compoentProps',\n          (val) => {\n            if (!_.isEqual(this.elementProps, val) || this.extra) {\n              const { showIds, ...others } = val\n              this.$emit('update', others, this.extra)\n              this.extra = undefined\n            }\n          },\n          { deep: true }\n        )\n      },\n    },\n  },\n}\n</script>\n\n<style lang=\"less\" scoped></style>\n"],"sourceRoot":""}