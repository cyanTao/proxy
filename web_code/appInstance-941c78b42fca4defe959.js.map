{"version":3,"sources":["webpack:///src/renderer/render/components/leftMenu/index.vue","webpack:///./src/renderer/render/components/leftMenu/index.vue?406e","webpack:///./src/renderer/render/index.vue?185e","webpack:///./src/renderer/render/components/leftMenu/index.vue","webpack:///./src/renderer/render/components/compContent/index.vue","webpack:///./src/renderer/render/components/leftMenu/index.vue?4017","webpack:///./src/renderer/render/components/leftMenu/index.vue?6fbd","webpack:///./src/renderer/render/index.vue?4ec1","webpack:///./src/renderer/render/components/compContent/index.vue?5beb","webpack:///./src/renderer/render/components/compContent/index.vue?b908","webpack:///./src/renderer/render/index.vue?fd00","webpack:///./src/renderer/render/index.vue?6817","webpack:///src/renderer/render/index.vue","webpack:///./src/renderer/render/index.vue?cc89","webpack:///./src/renderer/render/components/leftMenu/index.vue?42e5","webpack:///./src/renderer/render/components/compContent/index.vue?6a41","webpack:///./src/renderer/render/index.vue?93b9","webpack:///./src/renderer/render/index.vue","webpack:///./src/renderer/render/components/compContent/index.vue?e4a9","webpack:///src/renderer/render/components/compContent/index.vue","webpack:///./src/renderer/render/components/leftMenu/index.vue?ab98","webpack:///./src/renderer/render/components/leftMenu/index.vue?1a7f"],"names":["id","children","pid","inject","components","props","appInfo","type","Object","data","isCollapse","loading","menuOptions","pagesObj","expand","large","mounted","methods","getImageUrl","treeMap","elementId","pageDesignId","elementType","hidden","sort","elementName","name","parentId","code","hasChild","filterData","handlePageSelect","this","$emit","computed","settings","horizontal","navigatePosition","largeWatcher","length","watch","val","$nextTick","created","getLeftMenuOptions","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","class","style","attrs","appIcon","_v","_e","appName","_s","ref","pageId","on","$event","_l","group","pages","key","slot","page","$getImgPrefix","staticRenderFns","component","content","__esModule","default","module","i","locals","exports","add","pageLoading","staticStyle","nativeOn","preventDefault","currentElement","_b","layoutData","tag","errorLogVisible","column","navigateShow","LeftMenuLoading","menuInited","refresh","mixins","LeftMenu","AppHeader","CompContent","errorCapture","provide","vid","isPreview","activePageData","pageAlive","pageData","$store","state","CODE","lowCodeStore","preview","getPageData","$route","immediate","handler","initQuery","getAppInfo","destroyed","errorCaptured","target","vm","message","err","error","isPageShare","Boolean","getShareInfoError","getPageInfo","_storeDispatch","queryCode","cache","instanceId","appId","getPageSharingSettings","$http","url","pageCode","res","JSON","parse","$watch","commit"],"mappings":"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","file":"appInstance-941c78b42fca4defe959.js","sourcesContent":["<template>\n  <div\n    v-show=\"settings.navigateShow\"\n    class=\"preview-aside\"\n    :class=\"{ 'is-collapse': isCollapse, horizontal }\"\n    v-loading=\"loading\"\n  >\n    <div\n      class=\"app-logo\"\n      :style=\"horizontal ? 'width: 160px; height: 40px;' : ''\"\n    >\n      <img class=\"app-logo-img\" :src=\"getImageUrl(appInfo.appIcon)\" />\n      <span\n        class=\"app-logo-title\"\n        :title=\"appInfo.appName\"\n        v-if=\"!isCollapse\"\n        >{{ appInfo.appName }}</span\n      >\n    </div>\n    <el-menu\n      v-if=\"settings.navigateShow\"\n      :default-active=\"pageId()\"\n      class=\"left-menu\"\n      :class=\"{ expand, large }\"\n      :mode=\"horizontal ? 'horizontal' : 'vertical'\"\n      ref=\"leftMenu\"\n      :collapse=\"isCollapse\"\n      background-color=\"#181C26\"\n      text-color=\"#ACACAC\"\n      active-text-color=\"#FFFFFF\"\n    >\n      <div\n        v-if=\"large\"\n        @click=\"expand = !expand\"\n        class=\"expand-icon\"\n        :class=\"{ expand }\"\n      >\n        <span></span>\n        <span></span>\n        <span></span>\n      </div>\n      <template v-for=\"group in menuOptions\">\n        <el-submenu\n          popper-class=\"preview-aside-menu-popper\"\n          v-if=\"group.pages.length\"\n          :index=\"group.id\"\n          :key=\"group.id\"\n        >\n          <template slot=\"title\">\n            <i v-if=\"!horizontal\" class=\"el-icon-folder-opened page-icon\"></i>\n            <span class=\"page-text\" :title=\"group.name\">{{ group.name }}</span>\n          </template>\n          <el-menu-item\n            :index=\"page.id\"\n            v-for=\"page in group.pages\"\n            :key=\"page.id\"\n            @click=\"handlePageSelect(page.id)\"\n          >\n            <img v-if=\"!horizontal\" class=\"page-icon el-icon-tickets\" />\n            <span class=\"page-text\" :title=\"page.name\">{{ page.name }}</span>\n          </el-menu-item>\n        </el-submenu>\n        <el-submenu\n          popper-class=\"preview-aside-menu-popper\"\n          :index=\"group.id\"\n          :key=\"group.id\"\n          v-else-if=\"group.type == 2\"\n        >\n          <template slot=\"title\">\n            <i v-if=\"!horizontal\" class=\"el-icon-folder-opened page-icon\"></i>\n            <span class=\"page-text\" :title=\"group.name\">{{ group.name }}</span>\n          </template>\n        </el-submenu>\n        <el-menu-item\n          :index=\"group.id\"\n          :key=\"group.id\"\n          @click=\"handlePageSelect(group.id)\"\n          v-else-if=\"group.type == 1\"\n        >\n          <i v-if=\"!horizontal\" class=\"page-icon el-icon-tickets\" />\n          <span class=\"page-text\" :title=\"group.name\">{{ group.name }}</span>\n        </el-menu-item>\n      </template>\n    </el-menu>\n    <div class=\"aside-bottom\" v-if=\"!horizontal\">\n      <img\n        @click=\"isCollapse = !isCollapse\"\n        class=\"collapse-btn\"\n        :class=\"{ 'is-collapse': isCollapse }\"\n        :src=\"$getImgPrefix('/design/svg/collapse-icon.svg')\"\n        alt=\"\"\n      />\n    </div>\n    <div class=\"menu-mask\" v-if=\"expand\" @click=\"expand = false\"></div>\n  </div>\n</template>\n\n<script>\nimport API from '@/api/application'\nimport { getImageUrl } from '@/utils'\nimport treeTool from 'tree-tool'\nimport { UPDATE_PAGE_DATA } from '@/config/storeKey'\nimport _ from 'lodash'\nimport { INSTALLED } from '@/config'\nconst treeUtil = treeTool.createInstance({\n  id: 'id',\n  children: 'pages',\n})\n\nconst treeUtil2 = treeTool.createInstance({\n  id: 'elementId',\n  children: 'children',\n  pid: 'parentId',\n})\nexport default {\n  inject: ['id', 'vid', 'pageId', 'isPreview'],\n  components: {},\n  props: {\n    appInfo: {\n      type: Object,\n    },\n  },\n  data() {\n    return {\n      isCollapse: false,\n      loading: false,\n      menuOptions: [],\n      // key是页面id,value是页面的值\n      pagesObj: {},\n      expand: false,\n      // 是否多页面\n      large: false,\n    }\n  },\n  mounted() {},\n  methods: {\n    getImageUrl,\n    async getLeftMenuOptions() {\n      this.loading = true\n      const { id, vid, isPreview } = this\n      // 预览模式\n      let res\n      if (isPreview()) {\n        res = await this.$http({\n          url: API.pageDesignMenus,\n          data: {\n            appDesignId: vid,\n          },\n        })\n      } else {\n        res = await this.$http({\n          url: API.getMenuInfo,\n          data: {\n            appId: id,\n            source: INSTALLED,\n          },\n        })\n      }\n      const {\n        data: { groupPages, homePageId } = { groupPages: [], homePageId: '' },\n      } = res\n      const pageTree = groupPages.map((item) => this.treeMap(item, 0))\n      this.$store.commit(UPDATE_PAGE_DATA, {\n        pageData: _.cloneDeep(treeUtil2.toList(pageTree)),\n      })\n      this.menuOptions = this.filterData(groupPages)\n\n      treeUtil.forEach(groupPages, (node) => {\n        this.pagesObj[node.id] = node\n      })\n      // 如果没有当前选中页面,就选中首页\n      !this.pageId() && this.handlePageSelect(homePageId)\n      this.$emit('init', this.menuOptions)\n      this.loading = false\n    },\n    // 格式化接口返回的数据\n    treeMap(data, parentId) {\n      const hasChild = data.pages && data.pages.length > 0\n      // 可以根据实际开发需要返回自己想要的key值\n      return {\n        elementId: `${data.code}`,\n        pageDesignId: `${data.id}`,\n        elementType: data.type === 2 ? 'page-group' : 'page',\n        hidden: data.hidden,\n        sort: data.sort,\n        elementName: data.name,\n        parentId: parentId,\n        code: data.code ? data.code : '',\n        children: hasChild\n          ? data.pages.map((i) => this.treeMap(i, data.id))\n          : [],\n        type: data.type,\n      }\n    },\n    filterData(data) {\n      return data\n        .filter((item) => !item.hidden)\n        .map((item) => {\n          if (item.pages && item.pages.length) {\n            item.pages = item.pages.filter((page) => !page.hidden)\n          }\n          return item\n        })\n    },\n    handlePageSelect(id) {\n      if (this.expand) {\n        this.expand = false\n      }\n      this.$emit('select', this.pagesObj[id])\n    },\n  },\n\n  computed: {\n    settings() {\n      return this.appInfo.settings || {}\n    },\n    horizontal() {\n      return this.settings.navigatePosition === 'top'\n    },\n    largeWatcher() {\n      return this.horizontal && this.menuOptions.length\n    },\n  },\n\n  watch: {\n    largeWatcher(val) {\n      if (val) {\n        this.$nextTick(() => {\n          const menuDom = this.$refs.leftMenu.$el\n          const totalWidth = Array.from(\n            menuDom.querySelectorAll('li.el-menu-item')\n          ).reduce((total, item) => {\n            return (total += item.offsetWidth)\n          }, 0)\n          this.large = totalWidth >= menuDom.offsetWidth\n        })\n      } else {\n        this.large = false\n      }\n    },\n  },\n  created() {\n    this.getLeftMenuOptions()\n  },\n}\n</script>\n<style lang=\"less\" scoped>\n.preview-aside::v-deep {\n  display: flex;\n  flex-direction: column;\n  width: 160px;\n  border-right: 1px solid #eeeeee;\n  transition: width 0.2s ease-in-out;\n  background: #181c26;\n  .el-menu-item {\n    height: 40px;\n    line-height: 40px;\n    display: flex;\n    align-items: center;\n    &:focus {\n      background-color: unset;\n    }\n    &.is-active {\n      background-color: #327bfa !important;\n      color: white !important;\n      border-bottom-color: transparent !important;\n    }\n    &:focus,\n    &:hover {\n      background-color: #327bfa !important;\n      color: white !important;\n    }\n  }\n  .el-menu-item,\n  .el-submenu__title {\n    height: 40px;\n    line-height: 40px;\n    display: flex;\n    align-items: center;\n  }\n  .el-submenu.is-active .el-submenu__title {\n    color: white !important;\n  }\n  &.horizontal {\n    width: 100%;\n    flex-direction: row;\n    border-bottom: 1px solid #eee;\n    transform: none;\n    .app-logo {\n      border-right: 1px solid rgba(115, 131, 153, 0.4);\n    }\n    .left-menu {\n      position: fixed;\n      left: 160px;\n      top: 0;\n      width: calc(100% - 215px);\n      overflow: hidden;\n      height: 40px;\n      z-index: 100;\n      &.large {\n        &.expand {\n          box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.12);\n          height: auto;\n          padding-bottom: 20px;\n        }\n        .expand-icon {\n          position: absolute;\n          right: 4px;\n          top: 0;\n          cursor: pointer;\n          width: 40px;\n          height: 40px;\n          &.expand {\n            background-color: #374159;\n          }\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          span {\n            background-color: #92969b;\n            width: 2px;\n            height: 2px;\n            border-radius: 50%;\n            & ~ span {\n              margin-left: 3px;\n            }\n          }\n        }\n      }\n    }\n    .el-menu-item {\n      border-bottom-color: transparent !important;\n      &.is-active {\n        background-color: #374159 !important;\n      }\n      &:focus,\n      &:hover {\n        background-color: #374159 !important;\n      }\n    }\n    .el-submenu.is-active .el-submenu__title {\n      background-color: #374159 !important;\n      border-bottom-color: transparent !important;\n    }\n  }\n  &.is-collapse {\n    width: 65px;\n    .el-menu-item {\n      text-overflow: initial;\n    }\n  }\n  .app-logo {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 10px 10px;\n    box-sizing: border-box;\n    .app-logo-img {\n      width: 24px;\n      height: 24px;\n    }\n    .app-logo-title {\n      margin-left: 10px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      font-size: 14px;\n      color: #ffffff;\n    }\n  }\n  .left-menu {\n    max-height: calc(100vh - 70px - 20px);\n    overflow-y: hidden;\n    overflow-x: hidden;\n    flex: 1;\n    border: none;\n    &:hover {\n      overflow-y: auto;\n    }\n    .page-icon {\n      font-size: 16px;\n      margin-right: 4px;\n      color: inherit;\n    }\n    .page-text {\n      font-size: 12px;\n      font-family: PingFangSC-Regular;\n      color: inherit;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n  .aside-bottom {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0 5px;\n    border-top: 1px solid rgba(115, 131, 153, 0.4);\n    height: 50px;\n\n    .collapse-btn {\n      cursor: pointer;\n      transform: rotate(-180deg);\n      &.is-collapse {\n        transform: rotate(0deg);\n      }\n    }\n  }\n  .menu-mask {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 99;\n    background: transparent;\n    opacity: 0.3;\n  }\n}\n</style>\n<style lang=\"less\">\n.preview-aside-menu-popper {\n  .el-menu--popup {\n    .el-menu-item:not(.is-disabled):focus,\n    .el-menu-item:not(.is-disabled):hover {\n      background-color: #327bfa !important;\n      color: white !important;\n    }\n    .el-menu-item.is-active {\n      background-color: #327bfa !important;\n      color: white !important;\n      border-bottom-color: transparent !important;\n    }\n    .page-icon {\n      margin-right: 2px;\n    }\n  }\n  &.el-menu--horizontal {\n    .el-menu--popup {\n      .el-menu-item:not(.is-disabled):focus,\n      .el-menu-item:not(.is-disabled):hover {\n        background-color: #374159 !important;\n      }\n      .el-menu-item.is-active {\n        background-color: #374159 !important;\n      }\n    }\n    .el-menu--popup-bottom-start {\n      margin-top: 0 !important;\n    }\n  }\n}\n</style>","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.settings.navigateShow),expression:\"settings.navigateShow\"},{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"preview-aside\",class:{ 'is-collapse': _vm.isCollapse, horizontal: _vm.horizontal }},[_c('div',{staticClass:\"app-logo\",style:(_vm.horizontal ? 'width: 160px; height: 40px;' : '')},[_c('img',{staticClass:\"app-logo-img\",attrs:{\"src\":_vm.getImageUrl(_vm.appInfo.appIcon)}}),_vm._v(\" \"),(!_vm.isCollapse)?_c('span',{staticClass:\"app-logo-title\",attrs:{\"title\":_vm.appInfo.appName}},[_vm._v(_vm._s(_vm.appInfo.appName))]):_vm._e()]),_vm._v(\" \"),(_vm.settings.navigateShow)?_c('el-menu',{ref:\"leftMenu\",staticClass:\"left-menu\",class:{ expand: _vm.expand, large: _vm.large },attrs:{\"default-active\":_vm.pageId(),\"mode\":_vm.horizontal ? 'horizontal' : 'vertical',\"collapse\":_vm.isCollapse,\"background-color\":\"#181C26\",\"text-color\":\"#ACACAC\",\"active-text-color\":\"#FFFFFF\"}},[(_vm.large)?_c('div',{staticClass:\"expand-icon\",class:{ expand: _vm.expand },on:{\"click\":function($event){_vm.expand = !_vm.expand}}},[_c('span'),_vm._v(\" \"),_c('span'),_vm._v(\" \"),_c('span')]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.menuOptions),function(group){return [(group.pages.length)?_c('el-submenu',{key:group.id,attrs:{\"popper-class\":\"preview-aside-menu-popper\",\"index\":group.id}},[_c('template',{slot:\"title\"},[(!_vm.horizontal)?_c('i',{staticClass:\"el-icon-folder-opened page-icon\"}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"page-text\",attrs:{\"title\":group.name}},[_vm._v(_vm._s(group.name))])]),_vm._v(\" \"),_vm._l((group.pages),function(page){return _c('el-menu-item',{key:page.id,attrs:{\"index\":page.id},on:{\"click\":function($event){return _vm.handlePageSelect(page.id)}}},[(!_vm.horizontal)?_c('img',{staticClass:\"page-icon el-icon-tickets\"}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"page-text\",attrs:{\"title\":page.name}},[_vm._v(_vm._s(page.name))])])})],2):(group.type == 2)?_c('el-submenu',{key:group.id,attrs:{\"popper-class\":\"preview-aside-menu-popper\",\"index\":group.id}},[_c('template',{slot:\"title\"},[(!_vm.horizontal)?_c('i',{staticClass:\"el-icon-folder-opened page-icon\"}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"page-text\",attrs:{\"title\":group.name}},[_vm._v(_vm._s(group.name))])])],2):(group.type == 1)?_c('el-menu-item',{key:group.id,attrs:{\"index\":group.id},on:{\"click\":function($event){return _vm.handlePageSelect(group.id)}}},[(!_vm.horizontal)?_c('i',{staticClass:\"page-icon el-icon-tickets\"}):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"page-text\",attrs:{\"title\":group.name}},[_vm._v(_vm._s(group.name))])]):_vm._e()]})],2):_vm._e(),_vm._v(\" \"),(!_vm.horizontal)?_c('div',{staticClass:\"aside-bottom\"},[_c('img',{staticClass:\"collapse-btn\",class:{ 'is-collapse': _vm.isCollapse },attrs:{\"src\":_vm.$getImgPrefix('/design/svg/collapse-icon.svg'),\"alt\":\"\"},on:{\"click\":function($event){_vm.isCollapse = !_vm.isCollapse}}})]):_vm._e(),_vm._v(\" \"),(_vm.expand)?_c('div',{staticClass:\"menu-mask\",on:{\"click\":function($event){_vm.expand = false}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=77ca51d2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=77ca51d2&lang=less&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77ca51d2\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=62e20967&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=62e20967&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62e20967\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e04136fc\", content, true, {});","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e18dbc74&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"164d552c\", content, true, {});","export * from \"-!../../../../../node_modules/vue-style-loader/index.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=62e20967&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.pageLoading),expression:\"pageLoading\"}],staticClass:\"preview-page-content\"},[(!_vm.pageLoading)?[(_vm.getShareInfoError)?_c('div',{staticClass:\"empty-page\"},[_vm._v(\"该页面未开启分享\")]):_c('n-form',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},nativeOn:{\"submit\":function($event){$event.preventDefault();}}},[(_vm.currentElement)?_c(_vm.currentElement,_vm._b({key:_vm.layoutData.elementId,ref:_vm.layoutData.elementId,tag:\"component\",staticClass:\"page-content\",attrs:{\"id\":(\"page_\" + (_vm.layoutData.elementId))}},'component',_vm.layoutData,false)):_vm._e()],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"48318012\", content, true, {});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-container\",class:{ 'padding-bottom': _vm.errorLogVisible, column: _vm.settings.navigateShow && _vm.settings.navigatePosition === 'top' }},[(!_vm.LeftMenuLoading)?_c('left-menu',{attrs:{\"appInfo\":_vm.appInfo},on:{\"select\":_vm.handlePageSelect,\"init\":_vm.menuInited}}):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.pageLoading),expression:\"pageLoading\"}],staticClass:\"main\"},[(_vm.pageId)?[(_vm.settings.headerShow)?_c('app-header',{attrs:{\"pageId\":_vm.pageId,\"menu\":_vm.menuOptions},on:{\"refresh\":_vm.refresh}}):_vm._e(),_vm._v(\" \"),(_vm.pageAlive)?_c('comp-content'):_vm._e()]:_c('div',{staticClass:\"empty-page\"},[_vm._v(_vm._s('请选择页面'))])],2),_vm._v(\" \"),(_vm.errorLogVisible)?_c('error-capture',{attrs:{\"top\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-container\" :class=\"{ 'padding-bottom': errorLogVisible, column: settings.navigateShow && settings.navigatePosition === 'top' }\">\n    <left-menu\n      v-if=\"!LeftMenuLoading\"\n      :appInfo=\"appInfo\"\n      @select=\"handlePageSelect\"\n      @init=\"menuInited\"\n    />\n    <div class=\"main\" v-loading=\"pageLoading\">\n      <template v-if=\"pageId\">\n        <app-header\n          v-if=\"settings.headerShow\"\n          :pageId=\"pageId\"\n          :menu=\"menuOptions\"\n          @refresh=\"refresh\"\n        ></app-header>\n        <comp-content v-if=\"pageAlive\" />\n      </template>\n      <div class=\"empty-page\" v-else>{{ '请选择页面' }}</div>\n    </div>\n    <error-capture v-if=\"errorLogVisible\" top></error-capture>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from 'vuex'\nimport { UPDATE_PAGE_CONFIG } from '@/config/storeKey'\nimport API from '@/api/application'\nimport { INSTALLED, VIEW } from '@/config'\nimport KEY from '@/store/base-info/mutation-types'\n\n// components\nimport LeftMenu from './components/leftMenu'\nimport _ from 'lodash'\nimport echarts from '@/lib/echarts'\nimport { loadCustomIconfont } from '@/utils'\nimport trigger from '@/renderer/tools/trigger'\nimport { formatSetting } from '@/components/settingsManage/config'\nimport pageStore from '../tools/pageStore'\nexport default {\n  mixins: [pageStore],\n  components: {\n    LeftMenu,\n    AppHeader: () => import('./components/Header'),\n    CompContent: () => import('./components/compContent'),\n    errorCapture: () => import('@/components/errorCapture'),\n  },\n  provide() {\n    return {\n      // 实例模式,访问实例的id\n      id: this.id,\n      // 预览模式,预览的版本id\n      vid: this.vid,\n      // 预览当前选中的页面\n      pageId: () => this.pageId,\n      // 是否是预览模式\n      isPreview: () => this.isPreview\n    }\n  },\n  name: 'Page',\n  data() {\n    return {\n      id: '', // 应用id,用于获取配置\n      vid: '', // 应用版本id,用于获取配置\n      pageId: '', // 选中的页面id\n      pageLoading: false,\n      LeftMenuLoading: true,\n      menuOptions: [],\n      appInfo: {\n        settings: {}\n      },\n      activePageData: {},\n      pageAlive: false\n    }\n  },\n  computed: {\n    isPreview() {\n      return !!this.vid\n    },\n    pageData() {\n      return this.$store.state.CODE.lowCodeStore.pageData\n    },\n    errorLogVisible() {\n      return this.settings.preview\n    },\n    settings() {\n      return this.appInfo.settings || {}\n    }\n  },\n  methods: {\n    ...mapMutations({\n      setVersionInfo: KEY.VERSION_INFO,\n    }),\n    // 初次进入页面加载完应用菜单后执行加载当前页面\n    menuInited(menuOptions) {\n      this.menuOptions = menuOptions\n      this.getPageData()\n    },\n    handlePageSelect(pageData) {\n      const { id } = pageData\n      const { pageId } = this.$route.query\n      this.activePageData = pageData\n      // 当前默认选中首页\n      const routerFn = pageId ? 'push' : 'replace'\n      id != pageId &&\n        rootApp.$router[routerFn]({\n          query: {\n            ...this.$route.query,\n            pageId: id,\n          },\n        })\n    },\n    getPageData: _.debounce(async function () {\n      this.pageAlive = false\n      this.pageLoading = true\n      const elementId = this.pageId && this.pageData.find(item => Number(item.pageDesignId) === Number(this.pageId))?.elementId\n\n      try {\n        await this._storeDispatch(UPDATE_PAGE_CONFIG, {\n          elementId,\n          pageDesignId: this.pageId,\n          cache: !this.isPreview, // 预览模式配置经常改,不走缓存\n          instanceId: this.id,\n          appDesignId: this.vid,\n          isPageShare: false\n        })\n      } catch (e) {\n        console.log('页面数据为空')\n      }\n      this.pageAlive = true\n      this.pageLoading = false\n    }, 100),\n    // 格式化接口返回的数据\n    treeMap(data, parentId) {\n      const hasChild = data.pages && data.pages.length > 0\n      // 可以根据实际开发需要返回自己想要的key值\n      return {\n        elementId: `${data.code}`,\n        pageDesignId: `${data.id}`,\n        elementType: data.type === 2 ? 'page-group' : 'page',\n        hidden: data.hidden,\n        sort: data.sort,\n        elementName: data.name,\n        parentId: parentId,\n        code: data.code ? data.code : '',\n        children: hasChild\n          ? data.pages.map((i) => this.treeMap(i, data.id))\n          : [],\n        type: data.type,\n      }\n    },\n    async refresh() {\n      await this.getPageData()\n    },\n    async initQuery() {\n      const { id, vid, pageId } = this.$route.query\n      this.id = id\n      this.vid = vid\n      this.pageId = pageId\n    },\n    async getAppInfo() {\n      const { id, vid, isPreview } = this\n      let appInfo\n      // 访问实例\n      if (!isPreview) {\n        const res = await this.$http({\n          url: API.getAppDisplayInfo,\n          data: { appId: id, source: INSTALLED },\n        })\n        appInfo = res.data\n        // 兼容预览的数据\n        appInfo.appIcon = appInfo.icon\n      } else {\n        const res = await this.$http({\n          url: API.appDesignDetail,\n          data: { id: vid },\n        })\n        appInfo = res.data\n      }\n      this.setVersionInfo(appInfo)\n      this.appInfo = { ...appInfo, settings: formatSetting(appInfo.settings) }\n      this.LeftMenuLoading = false\n    },\n  },\n  watch: {\n    $route: {\n      immediate: true,\n      handler(val, oldVal) {\n        this.initQuery()\n        // 第一次进来页面不执行, 在地址变了(切换页面时),才去执行\n        if(val && oldVal && val.fullPath !== oldVal.fullPath) {\n          this.getPageData()\n        }\n      },\n    },\n  },\n  mounted() {},\n  created() {\n    loadCustomIconfont()\n    echarts.init()\n    this.getAppInfo()\n  },\n  destroyed() {\n  },\n  errorCaptured(err, vm) {\n    trigger.recordBug({\n      target: vm,\n      message: err,\n      error: err,\n    })\n    return false\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.page-container::v-deep {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  background-color: white;\n  position: relative;\n  &.padding-bottom {\n    padding-bottom: 36px;\n  }\n  &.column {\n    flex-direction: column;\n  }\n  & > .main {\n    flex: 1;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    position: relative;\n    .empty-page {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background-color: #edeff3;\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n</style>\n<style lang=\"less\">\nbody {\n  min-width: auto;\n}\n</style>\n","export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=e18dbc74&lang=less&scoped=true&\"","export * from \"-!../../../../../node_modules/vue-style-loader/index.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77ca51d2&lang=less&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=62e20967&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"885db4b2\", content, true, {});","export * from \"-!../../../node_modules/vue-style-loader/index.js!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/less-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e18dbc74&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e18dbc74&lang=less&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e18dbc74\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <main class=\"preview-page-content\" v-loading=\"pageLoading\">\n    <template v-if=\"!pageLoading\">\n      <div class=\"empty-page\" v-if=\"getShareInfoError\">该页面未开启分享</div>\n\n      <n-form v-else style=\"width: 100%; height: 100%\" @submit.native.prevent>\n        <component\n          v-if=\"currentElement\"\n          class=\"page-content\"\n          :is=\"currentElement\"\n          :ref=\"layoutData.elementId\"\n          :key=\"layoutData.elementId\"\n          v-bind=\"layoutData\"\n          :id=\"`page_${layoutData.elementId}`\"\n        ></component>\n      </n-form>\n    </template>\n  </main>\n</template>\n\n<script>\nimport _ from 'lodash'\n// components\n// 所有组件\nimport { getComponent } from '@/renderer/tools/config'\nimport { UPDATE_PAGE_CONFIG } from '@/config/storeKey'\nimport { getSharePageParams } from '@/utils'\nimport pageStore, { pageInject } from '@/renderer/tools/pageStore'\nimport API from '@/api/application'\n\nexport default {\n  inject: [...pageInject],\n  mixins: getSharePageParams().code ? [pageStore] : [],\n  provide() {\n    return {\n      isPageShare: this.isPageShare\n    }\n  },\n  components: {},\n  props: {\n    isPageShare: {\n      type: Boolean,\n    },\n  },\n  data() {\n    return {\n      pageLoading: this.isPageShare,\n      getShareInfoError: false,\n    }\n  },\n  computed: {\n    layoutData() {\n      return getSharePageParams().code ? this.storeData.layoutData : this.getStore().layoutData\n    },\n    currentElement() {\n      if (!this.layoutData?.elementType) {\n        return ''\n      }\n      const { elementType, elementVersion } = this.layoutData\n      return getComponent(elementType, elementVersion)\n    },\n  },\n  methods: {\n    getPageInfo() {\n      if (this.isPageShare) {\n        const { code, appId } = getSharePageParams()\n        const queryCode = this.$route.query.code\n        this.pageLoading = true\n        this._storeDispatch(UPDATE_PAGE_CONFIG, {\n          elementId: queryCode || code,\n          cache: false, // 预览模式配置经常改,不走缓存\n          instanceId: appId,\n          isPageShare: true,\n        })\n          .then(() => {\n            this.getShareInfoError = false\n          })\n          .catch(() => {\n            this.getShareInfoError = true\n          })\n          .finally(() => {\n            this.pageLoading = false\n          })\n      }\n    },\n    // 获取页面上的配置，目前只有展示面包屑配置\n    getPageSharingSettings() {\n      const { code, appId } = getSharePageParams()\n      this.$http({\n        url: API.pageSharingSettings,\n        data: {\n          appId,\n          pageCode: code,\n        },\n      })\n      .then((res) => {\n        let settings = {}\n        if (res.data) {\n          settings = JSON.parse(res.data)\n        }\n        this.$store.commit('setShowBreadcrumb', !!settings.showBreadcrumb)\n      })\n    }\n  },\n  created() {\n    if (this.isPageShare) {\n      // 面包屑改成可在页面分享处进行配置\n      this.getPageSharingSettings()\n    }\n    this.getPageInfo()\n    /*\n    1.只在基座没开多tab页模式的情况下去监听$route, 因为每次页面跳转不会触发created生命周期\n    2.开启了多tab页面模式时候, 每次内部页面跳转的时候会触发created生命从而触发getPageInfo\n    */\n    if(!this.$store.state.isNeedTab) {\n      this.$watch('$route', ({ path, query }, { path: oldPath, query: oldQuery }) => {\n\n        // 路径一样但是query不一样, 是本路由下的跳转, 请求配置\n        // if(path === oldPath && !_.isEqual(query, oldQuery)) {\n          this.getPageInfo()\n        // }\n      })\n    }\n  },\n  destroyed () {\n    if (this.isPageShare) {\n      this.$store.commit('setShowBreadcrumb', true)\n    }\n  },\n  watch: {\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.preview-page-content {\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  overflow-x: auto;\n  .empty-page {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #edeff3;\n    width: 100%;\n    height: 100%;\n  }\n}\n</style>\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77ca51d2&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5968d9aa\", content, true, {});","export * from \"-!../../../../../node_modules/vue-style-loader/index.js!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/less-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=less&\""],"sourceRoot":""}