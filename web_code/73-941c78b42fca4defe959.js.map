{"version":3,"sources":["webpack:///./src/pages/application/app-design/components/Favorite/list-dialog.vue?854b","webpack:///./src/pages/application/app-design/components/Favorite/list-dialog.vue?a5c9","webpack:///./src/pages/application/app-design/components/Favorite/list-dialog.vue","webpack:///./src/pages/application/app-design/components/WidgetPanel/index.vue","webpack:///./src/pages/application/app-design/components/Favorite/list-dialog.vue?d2da","webpack:///./src/pages/application/app-design/components/WidgetPanel/index.vue?7949","webpack:///src/pages/application/app-design/components/Favorite/list-dialog.vue","webpack:///./src/pages/application/app-design/components/WidgetPanel/index.vue?8cba","webpack:///./src/pages/application/app-design/components/Favorite/list-dialog.vue?b70c","webpack:///./src/pages/application/app-design/components/WidgetPanel/index.vue?ed7d","webpack:///src/pages/application/app-design/components/WidgetPanel/index.vue","webpack:///./src/pages/application/app-design/components/WidgetPanel/index.vue?9b68"],"names":["content","__esModule","default","module","i","locals","exports","add","component","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","dialogVisible","handleClose","detail","staticStyle","on","$event","_v","_l","path","index","key","class","last","pathList","length","_s","type","favorite","_e","handleAddToPrivate","handleEdit","handleRemove","style","getImageUrl","icon","name","description","thumb","directives","rawName","value","expression","widget","id","handleShowDetail","widgetList","ref","handleEditSuccess","slot","loading","close","staticRenderFns","components","TemplateListDialog","inject","data","iconMap","CONFIG","versionList","widgetTypeList","selectedWidget","elementName","selectedTemplate","version","widgetType","widgets","templateList","collapses","templateCollapses","activeCollapses","activeTemplateCollapses","methods","handleGetTemplateList","$http","url","isVisible","pageSearch","queryString","handleUpdateCollapses","results","cb","templateSearch","toLowerCase","indexOf","handleUpdateTemplateList","map","handleUpdateTemplateCollapses","handleSelect","handleSelectTemplate","handleUpdateWidgets","dndOptions","handleShowTemplateList","$refs","templateListDialog","open","mounted","$nextTick","model","callback","$$v","scopedSlots","_u","fn","item","$set","v","collapse","title","elementType","$getImgPrefix","public"],"mappings":"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","file":"73-941c78b42fca4defe959.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-dialog.vue?vue&type=style&index=0&id=99ba4830&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"af112206\", content, true, {});","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./list-dialog.vue?vue&type=template&id=99ba4830&scoped=true&\"\nimport script from \"./list-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./list-dialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list-dialog.vue?vue&type=style&index=0&id=99ba4830&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"99ba4830\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a7686e04&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a7686e04&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7686e04\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"data-select-dialog\",attrs:{\"custom-class\":\"low-code-dialog\",\"title\":\"模板管理\",\"visible\":_vm.dialogVisible,\"close-on-click-modal\":false,\"modal-append-to-body\":true,\"append-to-body\":true,\"width\":\"1200px\",\"top\":\"15vh\",\"before-close\":_vm.handleClose}},[(!_vm.detail)?_c('div',{staticClass:\"dialog-content\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"widgets-list\"},_vm._l((_vm.widgetList),function(widget){return _c('div',{key:widget.id,staticClass:\"widget-item\",on:{\"click\":function($event){return _vm.handleShowDetail(widget)}}},[_c('div',{staticClass:\"widget-icon\",style:((\"background-image: url(\" + (_vm.getImageUrl(widget.icon)) + \")\"))}),_vm._v(\" \"),_c('div',{staticClass:\"widget-name\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(widget.name))]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(_vm._s(widget.description))])])])}),0),_vm._v(\" \"),(!_vm.widgetList.length)?_c('div',{staticClass:\"empty-text\"},[_vm._v(\"暂无数据\")]):_vm._e()]):_c('div',{staticClass:\"widget-detail\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"left\"},[_c('el-button',{staticStyle:{\"color\":\"#444444\",\"font-size\":\"14px\",\"font-weight\":\"700\",\"margin-right\":\"18px\"},attrs:{\"size\":\"mini\",\"type\":\"text\",\"icon\":\"el-icon-back\"},on:{\"click\":function($event){_vm.detail = null}}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('n-breadcrumb',{staticClass:\"breadcrumb\",attrs:{\"separator-class\":\"el-icon-arrow-right\"}},_vm._l((_vm.pathList),function(path,index){return _c('n-breadcrumb-item',{key:path,staticClass:\"breadcrumb-item\",class:{ last: index === _vm.pathList.length - 1 }},[_vm._v(\"\\n            \"+_vm._s(path)+\"\\n          \")])}),1)],1),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"widget-tool\"},[(_vm.type === \"publish\" && !_vm.detail.favorite)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleAddToPrivate(_vm.detail)}}},[_vm._v(\"安装\")]):_vm._e(),_vm._v(\" \"),(_vm.type === \"private\")?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleEdit(_vm.detail)}}},[_vm._v(\"编辑\")]):_vm._e(),_vm._v(\" \"),(_vm.type !== \"publish\" || (_vm.type === \"publish\" && _vm.detail.favorite))?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleRemove(_vm.detail)}}},[_vm._v(_vm._s(_vm.type === 'private' ? '删除' : '卸载'))]):_vm._e()],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"bottom\"},[_c('div',{staticClass:\"widget-item\"},[_c('div',{staticClass:\"widget-icon\",style:((\"background-image: url(\" + (_vm.getImageUrl(_vm.detail.icon)) + \")\"))}),_vm._v(\" \"),_c('div',{staticClass:\"widget-name\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.detail.name))]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(_vm._s(_vm.detail.description))])])]),_vm._v(\" \"),_c('el-image',{staticClass:\"thumb\",attrs:{\"src\":_vm.getImageUrl(_vm.detail.thumb),\"preview-src-list\":[_vm.getImageUrl(_vm.detail.thumb)],\"fit\":\"contain\"}})],1)]),_vm._v(\" \"),_c('FavoriteDialog',{ref:\"favoriteDialog\",on:{\"success\":_vm.handleEditSuccess}}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"loading\":_vm.loading},on:{\"click\":_vm.close}},[_vm._v(\"关 闭\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a7686e04&lang=less&scoped=true&\"","<template>\n  <el-dialog\n    custom-class=\"low-code-dialog\"\n    class='data-select-dialog'\n    title=\"模板管理\"\n    :visible=\"dialogVisible\"\n    :close-on-click-modal=\"false\"\n    :modal-append-to-body=\"true\"\n    :append-to-body=\"true\"\n    width=\"1200px\"\n    top=\"15vh\"\n    :before-close=\"handleClose\"\n  >\n    <div class='dialog-content' v-if='!detail'>\n      <!-- <n-tabs class='tabs' tab-position=\"top\" v-model='type'>\n        <n-tab-pane label=\"个人模板\" name='private'></n-tab-pane>\n        <n-tab-pane label=\"公共模板\" name='publish'></n-tab-pane>\n      </n-tabs> -->\n      <div class='widgets-list' v-loading='loading'>\n        <div class='widget-item' v-for='widget in widgetList' :key='widget.id' @click='handleShowDetail(widget)'>\n          <div class='widget-icon' :style=\"`background-image: url(${getImageUrl(widget.icon)})`\"></div>\n          <div class='widget-name'>\n            <div class='name'>{{widget.name}}</div>\n            <div class='desc'>{{widget.description}}</div>\n          </div>\n        </div>\n      </div>\n      <div v-if='!widgetList.length' class='empty-text'>暂无数据</div>\n    </div>\n    <div class='widget-detail' v-else>\n      <div class='top'>\n        <div class='left'>\n          <el-button style='color: #444444; font-size: 14px; font-weight: 700;margin-right: 18px;' size='mini' type='text' @click='detail = null' icon='el-icon-back'>返回</el-button>\n          <n-breadcrumb class=\"breadcrumb\" separator-class=\"el-icon-arrow-right\">\n            <n-breadcrumb-item\n              class=\"breadcrumb-item\"\n              :class=\"{ last: index === pathList.length - 1 }\"\n              v-for=\"(path, index) in pathList\"\n              :key=\"path\"\n            >\n              {{ path }}\n            </n-breadcrumb-item>\n          </n-breadcrumb>\n        </div>\n        <div class='right'>\n          <div class='widget-tool'>\n            <el-button size='mini' type='primary' v-if='type === \"publish\" && !detail.favorite' @click='handleAddToPrivate(detail)'>安装</el-button>\n            <el-button size='mini' type='primary' v-if='type === \"private\"' @click='handleEdit(detail)'>编辑</el-button>\n            <el-button size='mini' type='danger' v-if='type !== \"publish\" || (type === \"publish\" && detail.favorite)' @click='handleRemove(detail)'>{{ type === 'private' ? '删除' : '卸载' }}</el-button>\n          </div>\n        </div>\n      </div>\n      <div class='bottom'>\n        <div class='widget-item'>\n          <div class='widget-icon' :style=\"`background-image: url(${getImageUrl(detail.icon)})`\"></div>\n          <div class='widget-name'>\n            <div class='name'>{{detail.name}}</div>\n            <div class='desc'>{{detail.description}}</div>\n          </div>\n        </div>\n        <el-image\n          class='thumb'\n          :src='getImageUrl(detail.thumb)'\n          :preview-src-list='[getImageUrl(detail.thumb)]'\n          fit='contain'\n        ></el-image>\n      </div>\n    </div>\n    <FavoriteDialog ref='favoriteDialog' @success='handleEditSuccess'></FavoriteDialog>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button :loading=\"loading\" @click=\"close\">关 闭</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\n  import Upload from '@/components/Upload'\n  import FavoriteDialog from './edit-dialog'\n  import API from '@/api/application'\n  import { getImageUrl } from '@/utils'\n\n  export default {\n    components: {\n      Upload,\n      FavoriteDialog\n    },\n    data() {\n      return {\n        dialogVisible: false,\n        loading: false,\n        widgetList: [],\n        type: 'private',\n        pathList: [],\n        detail: null\n      }\n    },\n    watch: {\n      type: {\n        immediate: true,\n        handler(n) {\n          this.handleGetWidgetList()\n        }\n      }\n    },\n    methods: {\n      getImageUrl,\n      open() {\n        this.type = 'private'\n        this.dialogVisible = true\n        this.handleGetWidgetList()\n      },\n      close() {\n        this.clear()\n      },\n      handleClose(done) {\n        this.clear()\n        done()\n      },\n      clear() {\n        this.detail = null\n        this.loading = false\n        this.dialogVisible = false\n      },\n      handleGetWidgetList() {\n        this.loading = true\n        this.$http({\n          url: this.type === 'private' ? API.componentTemplatePrivateList : API.componentTemplatePublishList,\n        })\n          .then(({data}) => {\n            this.widgetList = data\n          })\n          .finally(() => {\n            this.$nextTick(() => {\n              this.loading = false\n            })\n          })\n      },\n      handleAddToPrivate(widget) {\n        this.loading = true\n        this.$http({\n          url: API.componentTemplatePublishFavor,\n          data: {\n            componentTemplateId: widget.id\n          }\n        })\n          .then(({data}) => {\n            widget.favorite = true\n            this.$emit('refresh')\n          })\n          .finally(() => {\n            this.$nextTick(() => {\n              this.loading = false\n            })\n          })\n      },\n      handleEdit(widget) {\n        this.loading = true\n        this.$http({\n          url: API.componentTemplatePrivateDetail,\n          data: {\n            id: Number(widget.id)\n          }\n        }).then(({data}) => {\n          this.$refs.favoriteDialog.open({data})\n        })\n        .finally(() => {\n          this.loading = false\n        })\n      },\n      async handleRemove(widget) {\n        await this.$confirm(`确认将此模板[${widget.name}]从个人模板中移除吗？`)\n        const data = this.type === 'private' ? {id: widget.id} : {componentTemplateId: widget.id}\n        this.loading = true\n        this.$http({\n          url: this.type === 'private' ? API.componentTemplatePrivateRemove : API.componentTemplatePublishUnfavor,\n          data\n        })\n          .then(({data}) => {\n            if (this.type === 'private') {\n              this.widgetList = this.widgetList.filter(item => item.id !== widget.id)\n              this.detail = null\n            } else {\n              widget.favorite = false\n            }\n            this.$emit('refresh')\n          })\n          .finally(() => {\n            this.$nextTick(() => {\n              this.loading = false\n            })\n          })\n      },\n      handleEditSuccess(widget) {\n        const current = this.widgetList.find(item => item.id === widget.id)\n        current.name = widget.name\n        current.icon = widget.icon\n        current.description = widget.description\n        this.$emit('refresh')\n      },\n      handleShowDetail(widget) {\n        this.detail = widget\n        this.pathList = [this.type === 'private' ? '个人模板' : '公共模板', widget.name]\n      }\n    }\n  }\n</script>\n\n<style lang='less' scoped>\n  .dialog-content::v-deep {\n    min-height: 431px;\n    max-height: 60vh;\n    overflow-y: auto;\n    .widgets-list {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, 280px);\n      gap: 10px;\n      .widget-item {\n        display: flex;\n        align-items: center;\n        height: 100px;\n        border: 1px solid #E4E7ED;\n        border-radius: 3px;\n        &:hover {\n          cursor: pointer;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n        }\n        .widget-icon {\n          width: 60px;\n          height: 60px;\n          margin-left: 10px;\n          background-size: 100% 100%;\n          background-repeat: no-repeat;\n        }\n        .widget-name {\n          height: 100%;\n          padding-top: 15px;\n          padding-left: 10px;\n          width: 170px;\n          .name {\n            font-size: 14px;\n            font-weight: 700;\n            color: #333333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .desc {\n            padding-right: 10px;\n            padding-top: 5px;\n            color: #999999;\n            font-size: 12px;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 2;\n            overflow: hidden;\n          }\n        }\n      }\n    }\n    .empty-text {\n      text-align: center;\n      margin: 80px;\n    }\n  }\n  .widget-detail::v-deep {\n    .left {\n      display: flex;\n      align-items: center;\n    }\n    .top {\n      display: flex;\n      justify-content: space-between;\n    }\n    .bottom {\n      width: 90%;\n      margin: 20px auto 0;\n      .widget-item {\n        display: flex;\n        align-items: center;\n        height: 100px;\n        .widget-icon {\n          width: 70px;\n          height: 70px;\n          margin-left: 10px;\n          background-size: 100% 100%;\n          background-repeat: no-repeat;\n        }\n        .widget-name {\n          height: 100%;\n          padding-top: 15px;\n          padding-left: 10px;\n          .name {\n            font-size: 18px;\n            font-weight: 700;\n            color: #333333;\n            overflow: hidden;\n            text-overflow:ellipsis;\n            white-space: nowrap;\n          }\n          .desc {\n            padding-right: 10px;\n            padding-top: 5px;\n            color: #999999;\n            font-size: 16px;\n            display: -webkit-box;\n            -webkit-box-orient: vertical;\n            -webkit-line-clamp: 3;\n            overflow: hidden;\n          }\n        }\n      }\n      .thumb {\n        width: 100%;\n        height: 300px;\n        border: 1px solid #E4E7ED;\n        border-radius: 3px;\n      }\n    }\n  }\n</style>\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a7686e04&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"669a620a\", content, true, {});","export * from \"-!../../../../../../node_modules/vue-style-loader/index.js!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./list-dialog.vue?vue&type=style&index=0&id=99ba4830&lang=less&scoped=true&\"","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js?cacheDirectory=true!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <n-tabs\n    class=\"widget-tabs\"\n    v-model=\"widgetType\"\n    @tab-click=\"handleUpdateWidgets\"\n  >\n    <n-tab-pane label=\"UI组件\" name=\"base\">\n      <div class=\"widget-panel\">\n        <div class=\"title\">\n          <div class=\"top\">\n            <el-autocomplete\n              size=\"mini\"\n              class=\"autocomplete-select\"\n              popper-class=\"my-autocomplete\"\n              v-model=\"selectedWidget.elementName\"\n              :fetch-suggestions=\"pageSearch\"\n              placeholder=\"请输入组件名筛选\"\n              clearable\n              @select=\"handleSelect\"\n            >\n              <i class=\"el-icon-search el-input__icon\" slot=\"suffix\"></i>\n              <template slot-scope=\"{ item }\">\n                <div class=\"name\">{{ item.elementName }}</div>\n              </template>\n            </el-autocomplete>\n            <el-select\n              size=\"mini\"\n              class=\"version-select\"\n              v-model=\"version\"\n              @change=\"handleUpdateWidgets\"\n            >\n              <el-option\n                v-for=\"(v, index) in versionList\"\n                :key=\"index\"\n                :label=\"v\"\n                :value=\"v\"\n              ></el-option>\n            </el-select>\n          </div>\n        </div>\n        <el-collapse v-model=\"activeCollapses\">\n          <template v-for=\"collapse in collapses\">\n            <el-collapse-item\n              v-if=\"collapse.widgets.length\"\n              :key=\"collapse.name\"\n              :title=\"collapse.title\"\n              :name=\"collapse.name\"\n            >\n              <ul class=\"widget-list\">\n                <li\n                  class=\"widget is-accept-drag no-hover\"\n                  v-for=\"widget in collapse.widgets\"\n                  :key=\"widget.elementType\"\n                  :data-zone=\"`_${widget.elementType}`\"\n                >\n                  <div\n                    class=\"icon_wrapper\"\n                    :style=\"`background-image: url(${\n                      $getImgPrefix(iconMap[widget.elementType])\n                    })`\"\n                  ></div>\n                  <div class=\"name\">{{ widget.elementName }}</div>\n                </li>\n              </ul>\n            </el-collapse-item>\n          </template>\n        </el-collapse>\n      </div>\n    </n-tab-pane>\n    <n-tab-pane label=\"组件模板\" name=\"template\">\n      <div class=\"widget-panel\" v-loading=\"loading\">\n        <div class=\"title\">\n          <div class=\"top\">\n            <el-autocomplete\n              size=\"mini\"\n              class=\"autocomplete-select\"\n              popper-class=\"my-autocomplete\"\n              v-model=\"selectedTemplate.name\"\n              :fetch-suggestions=\"templateSearch\"\n              placeholder=\"请输入模板名筛选\"\n              clearable\n              @select=\"handleSelectTemplate\"\n            >\n              <i class=\"el-icon-search el-input__icon\" slot=\"suffix\"></i>\n              <template slot-scope=\"{ item }\">\n                <div class=\"name\">{{ item.name }}</div>\n              </template>\n            </el-autocomplete>\n            <el-button\n              style=\"margin-left: 5px; padding: 7px\"\n              size=\"mini\"\n              type=\"primary\"\n              icon=\"el-icon-s-tools\"\n              @click=\"handleShowTemplateList\"\n            ></el-button>\n          </div>\n        </div>\n        <el-collapse v-model=\"activeTemplateCollapses\">\n          <template v-for=\"collapse in templateCollapses\">\n            <el-collapse-item\n              :key=\"collapse.name\"\n              :title=\"collapse.title\"\n              :name=\"collapse.name\"\n            >\n              <ul v-if=\"collapse.widgets.length\" class=\"widget-list\">\n                <el-tooltip\n                  popper-class=\"widget-list-tooltip\"\n                  v-for=\"widget in collapse.widgets\"\n                  placement=\"right\"\n                  :key=\"widget.id\"\n                  :visible-arrow=\"false\"\n                >\n                  <div\n                    slot=\"content\"\n                    class=\"preview-widget\"\n                    style=\"border-radius: 5px;\"\n                  >\n                    <div class=\"widget-name\">{{widget.name}}</div>\n                    <div class=\"preview-image\" :style=\"`background-image: url(${widget.public ? widget.thumb : getImageUrl(widget.thumb)});`\"></div>\n                    <!-- <div class=\"widget-desc\">{{widget.description}}</div> -->\n                  </div>\n                  <li\n                    class=\"widget is-accept-drag no-hover\"\n                    :data-zone=\"`_${widget.type}_${widget.id}_${widget.name}`\"\n                  >\n                    <div\n                      class=\"icon_wrapper\"\n                      :style=\"`background-image: url(${widget.public ? widget.icon : getImageUrl(\n                        widget.icon\n                      )});border-radius: 5px;`\"\n                    ></div>\n                    <div class=\"name\" style=\"margin-top: 4px\">\n                      {{ widget.name }}\n                    </div>\n                  </li>\n                </el-tooltip>\n              </ul>\n              <div v-else class=\"empty-text\">暂无数据</div>\n            </el-collapse-item>\n          </template>\n        </el-collapse>\n      </div>\n      <template-list-dialog\n        ref=\"templateListDialog\"\n        @refresh=\"handleGetTemplateList\"\n      ></template-list-dialog>\n    </n-tab-pane>\n  </n-tabs>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport { getWidgetList, versionList } from '@/config/module'\nimport publishTemplateList from '@/config/widgetTemplate'\nimport TemplateListDialog from '../Favorite/list-dialog'\nimport * as CONFIG from '@/config/widgets'\nimport API from '@/api/application'\nimport { getImageUrl } from '@/utils'\nfunction createFilter(queryString) {\n  return (widget) => {\n    return (\n      widget.elementName.toLowerCase().indexOf(queryString.toLowerCase()) !== -1\n    )\n  }\n}\nfunction createTemplateFilter(queryString) {\n  return (widget) => {\n    return widget.name.toLowerCase().indexOf(queryString.toLowerCase()) !== -1\n  }\n}\nexport default {\n  name: 'WidgetPanel',\n  components: {\n    TemplateListDialog,\n  },\n  inject: ['dndOptions'],\n  data() {\n    return {\n      iconMap: CONFIG.iconMap,\n      versionList,\n      widgetTypeList: CONFIG.widgetTypeList,\n      loading: false,\n      selectedWidget: {\n        elementName: '',\n      },\n      selectedTemplate: {\n        name: '',\n      },\n      version: _.last(versionList),\n      widgetType: 'base',\n      widgets: [],\n      templateList: [],\n      collapses: [\n        {\n          name: 'layoutTypes',\n          title: '布局组件',\n          widgets: [],\n        },\n        {\n          name: 'baseTypes',\n          title: '基础组件',\n          widgets: [],\n        },\n        {\n          name: 'formTypes',\n          title: '表单组件',\n          widgets: [],\n        },\n        {\n          name: 'dataTypes',\n          title: '高级组件',\n          widgets: [],\n        },\n        {\n          name: 'dialogTypes',\n          title: '窗体组件',\n          widgets: [],\n        },\n        {\n          name: 'chartTypes',\n          title: '图表组件',\n          widgets: [],\n        },\n      ],\n      templateCollapses: [\n        {\n          name: 'public',\n          title: '公共模板',\n          widgets: [],\n        },\n        {\n          name: 'persional',\n          title: '个人模板',\n          widgets: [],\n        },\n      ],\n      activeCollapses: [\n        'layoutTypes',\n        'baseTypes',\n        'formTypes',\n        'dataTypes',\n        'dialogTypes',\n        'chartTypes',\n      ],\n      activeTemplateCollapses: ['public', 'persional'],\n    }\n  },\n  methods: {\n    getImageUrl,\n    handleGetTemplateList() {\n      if (this.widgetType !== 'template') {\n        return\n      }\n      this.loading = true\n      this.$http({\n        url: API.componentTemplatePrivateList,\n      })\n        .then(({ data }) => {\n          const allTemplates = (data || []).concat(...publishTemplateList)\n          this.templateList = allTemplates.map((item) => ({\n            ...item,\n            isVisible: true,\n          }))\n          this.handleUpdateTemplateCollapses(this.templateList)\n          this.selectedTemplate = { name: '' }\n        })\n        .finally(() => {\n          this.$nextTick(() => {\n            this.loading = false\n          })\n        })\n    },\n    pageSearch(queryString, cb) {\n      const results = queryString\n        ? this.widgets.filter(createFilter(queryString))\n        : this.widgets\n      this.handleUpdateCollapses(results)\n      cb(results)\n    },\n    templateSearch(queryString, cb) {\n      const results = queryString\n        ? this.templateList.filter(createTemplateFilter(queryString))\n        : this.templateList\n      this.handleUpdateTemplateList(results)\n      cb(results)\n    },\n    handleUpdateTemplateList(results) {\n      const ids = results.map((item) => item.id)\n      this.templateList = this.templateList.map((item) => ({\n        ...item,\n        isVisible: ids.includes(item.id),\n      }))\n      this.handleUpdateTemplateCollapses(this.templateList)\n    },\n    handleSelect(widget) {\n      if (widget) {\n        this.selectedWidget = _.cloneDeep(widget)\n        this.handleUpdateCollapses([widget])\n      } else {\n        this.selectedWidget = { elementName: '' }\n        this.handleUpdateCollapses(this.widgets)\n      }\n    },\n    handleSelectTemplate(widget) {\n      if (widget) {\n        this.selectedTemplate = _.cloneDeep(widget)\n        this.templateList = this.templateList.map((item) => ({\n          ...item,\n          isVisible: widget.id === item.id,\n        }))\n      } else {\n        this.selectedTemplate = { name: '' }\n        this.templateList = this.templateList.map((item) => ({\n          ...item,\n          isVisible: true,\n        }))\n      }\n    },\n    handleUpdateWidgets() {\n      this.widgets = getWidgetList('base', this.version)\n      switch (this.widgetType) {\n        case 'template':\n          this.handleGetTemplateList()\n          break\n      }\n      this.dndOptions.widgets = this.widgets\n      this.handleUpdateCollapses(this.widgets)\n    },\n    handleUpdateCollapses(widgets) {\n      this.collapses = this.collapses.map((item) => ({\n        ...item,\n        widgets: widgets.filter((w) =>\n          CONFIG[item.name]?.includes(w.elementType)\n        ),\n      }))\n    },\n    handleUpdateTemplateCollapses(widgets) {\n      this.templateCollapses = this.templateCollapses.map((item) => ({\n        ...item,\n        widgets: widgets.filter((w) => {\n          return (\n            w.isVisible &&\n            ((item.name === 'public' && w.public) ||\n            (item.name === 'persional' && !w.public))\n          )\n        }),\n      }))\n    },\n    handleShowTemplateList() {\n      this.$refs.templateListDialog.open()\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.handleUpdateWidgets()\n    })\n  },\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import '~@/styles/index.less';\n.widget-tabs::v-deep {\n  .title {\n    margin-bottom: 10px;\n    .top {\n      display: flex;\n      align-items: center;\n      margin-bottom: 4px;\n      padding: 0 10px;\n      .type-select {\n        flex: 1;\n      }\n      .version-select {\n        width: 90px;\n        margin-left: 5px;\n      }\n    }\n    .bottom {\n      display: flex;\n      padding: 0 10px;\n      .autocomplete-select {\n        flex: 1;\n      }\n    }\n  }\n\n  .el-collapse {\n    border-bottom: none;\n    border-left: none;\n    border-right: none;\n    .el-collapse-item__content {\n      padding: 0;\n    }\n    .el-collapse-item__header {\n      padding-right: 0;\n      background: #f0f6ff;\n      height: 30px;\n      line-height: 30px;\n      font-weight: 700;\n    }\n  }\n\n  .widget-list {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 10px 0 10px 10px;\n    & > * {\n      margin: 0 4px 0 0;\n      &:last-child {\n        margin: 0;\n      }\n    }\n  }\n\n  .widget {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 70px;\n    height: 70px;\n    text-align: center;\n    &:hover {\n      cursor: grab;\n      background: #f5f7fa;\n\n      .iconfont {\n        color: @drop-main-color;\n      }\n    }\n\n    .icon_wrapper {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 40px;\n      height: 40px;\n      background-size: 100% 100%;\n    }\n\n    .iconfont {\n      font-size: 26px;\n      color: #666666;\n    }\n\n    .name {\n      width: 100%;\n      padding: 0 4px;\n      font-size: 12px;\n      color: #666666;\n      text-align: center;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n  }\n  .empty-text {\n    margin: 20px auto !important;\n    text-align: center;\n  }\n}\n\n.preview-widget {\n  .widget-name {\n    font-size: 14px;\n    color: #333;\n    font-weight: 700;\n  }\n  .widget-desc {\n    color: #666;\n  }\n  .preview-image {\n    width: 200px;\n    height: 100px;\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-position: 50% 50%;\n    border: 1px solid #eee;\n  }\n}\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('n-tabs',{staticClass:\"widget-tabs\",on:{\"tab-click\":_vm.handleUpdateWidgets},model:{value:(_vm.widgetType),callback:function ($$v) {_vm.widgetType=$$v},expression:\"widgetType\"}},[_c('n-tab-pane',{attrs:{\"label\":\"UI组件\",\"name\":\"base\"}},[_c('div',{staticClass:\"widget-panel\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"top\"},[_c('el-autocomplete',{staticClass:\"autocomplete-select\",attrs:{\"size\":\"mini\",\"popper-class\":\"my-autocomplete\",\"fetch-suggestions\":_vm.pageSearch,\"placeholder\":\"请输入组件名筛选\",\"clearable\":\"\"},on:{\"select\":_vm.handleSelect},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.elementName))])]}}]),model:{value:(_vm.selectedWidget.elementName),callback:function ($$v) {_vm.$set(_vm.selectedWidget, \"elementName\", $$v)},expression:\"selectedWidget.elementName\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})]),_vm._v(\" \"),_c('el-select',{staticClass:\"version-select\",attrs:{\"size\":\"mini\"},on:{\"change\":_vm.handleUpdateWidgets},model:{value:(_vm.version),callback:function ($$v) {_vm.version=$$v},expression:\"version\"}},_vm._l((_vm.versionList),function(v,index){return _c('el-option',{key:index,attrs:{\"label\":v,\"value\":v}})}),1)],1)]),_vm._v(\" \"),_c('el-collapse',{model:{value:(_vm.activeCollapses),callback:function ($$v) {_vm.activeCollapses=$$v},expression:\"activeCollapses\"}},[_vm._l((_vm.collapses),function(collapse){return [(collapse.widgets.length)?_c('el-collapse-item',{key:collapse.name,attrs:{\"title\":collapse.title,\"name\":collapse.name}},[_c('ul',{staticClass:\"widget-list\"},_vm._l((collapse.widgets),function(widget){return _c('li',{key:widget.elementType,staticClass:\"widget is-accept-drag no-hover\",attrs:{\"data-zone\":(\"_\" + (widget.elementType))}},[_c('div',{staticClass:\"icon_wrapper\",style:((\"background-image: url(\" + (_vm.$getImgPrefix(_vm.iconMap[widget.elementType])) + \")\"))}),_vm._v(\" \"),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(widget.elementName))])])}),0)]):_vm._e()]})],2)],1)]),_vm._v(\" \"),_c('n-tab-pane',{attrs:{\"label\":\"组件模板\",\"name\":\"template\"}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"widget-panel\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"top\"},[_c('el-autocomplete',{staticClass:\"autocomplete-select\",attrs:{\"size\":\"mini\",\"popper-class\":\"my-autocomplete\",\"fetch-suggestions\":_vm.templateSearch,\"placeholder\":\"请输入模板名筛选\",\"clearable\":\"\"},on:{\"select\":_vm.handleSelectTemplate},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n                  var item = ref.item;\nreturn [_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.name))])]}}]),model:{value:(_vm.selectedTemplate.name),callback:function ($$v) {_vm.$set(_vm.selectedTemplate, \"name\", $$v)},expression:\"selectedTemplate.name\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"5px\",\"padding\":\"7px\"},attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-s-tools\"},on:{\"click\":_vm.handleShowTemplateList}})],1)]),_vm._v(\" \"),_c('el-collapse',{model:{value:(_vm.activeTemplateCollapses),callback:function ($$v) {_vm.activeTemplateCollapses=$$v},expression:\"activeTemplateCollapses\"}},[_vm._l((_vm.templateCollapses),function(collapse){return [_c('el-collapse-item',{key:collapse.name,attrs:{\"title\":collapse.title,\"name\":collapse.name}},[(collapse.widgets.length)?_c('ul',{staticClass:\"widget-list\"},_vm._l((collapse.widgets),function(widget){return _c('el-tooltip',{key:widget.id,attrs:{\"popper-class\":\"widget-list-tooltip\",\"placement\":\"right\",\"visible-arrow\":false}},[_c('div',{staticClass:\"preview-widget\",staticStyle:{\"border-radius\":\"5px\"},attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('div',{staticClass:\"widget-name\"},[_vm._v(_vm._s(widget.name))]),_vm._v(\" \"),_c('div',{staticClass:\"preview-image\",style:((\"background-image: url(\" + (widget.public ? widget.thumb : _vm.getImageUrl(widget.thumb)) + \");\"))})]),_vm._v(\" \"),_c('li',{staticClass:\"widget is-accept-drag no-hover\",attrs:{\"data-zone\":(\"_\" + (widget.type) + \"_\" + (widget.id) + \"_\" + (widget.name))}},[_c('div',{staticClass:\"icon_wrapper\",style:((\"background-image: url(\" + (widget.public ? widget.icon : _vm.getImageUrl(\n                      widget.icon\n                    )) + \");border-radius: 5px;\"))}),_vm._v(\" \"),_c('div',{staticClass:\"name\",staticStyle:{\"margin-top\":\"4px\"}},[_vm._v(\"\\n                    \"+_vm._s(widget.name)+\"\\n                  \")])])])}),1):_c('div',{staticClass:\"empty-text\"},[_vm._v(\"暂无数据\")])])]})],2)],1),_vm._v(\" \"),_c('template-list-dialog',{ref:\"templateListDialog\",on:{\"refresh\":_vm.handleGetTemplateList}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"sourceRoot":""}